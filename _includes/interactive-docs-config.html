<div
  class="config-panel border rounded my-4 bg-dark text-light"
  x-data="interactiveDocs"
  x-show="isInitialized"
  data-bs-theme="dark"
>
  <style>
    .form-select-lg {
      height: 48px !important;
      padding: 0.5rem 1rem !important;
      font-size: 16px !important;
      border-radius: 0.375rem !important;
      border-width: 1px !important;
      box-shadow: none !important;
    }
    .form-control-lg {
      font-size: 16px !important;
      height: 48px !important;
    }
    .config-header {
      cursor: pointer;
      user-select: none;
    }
    .config-header:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }
    .collapse-icon {
      transition: transform 0.3s ease;
    }
    .collapsed .collapse-icon {
      transform: rotate(-90deg);
    }
    /* Prevent flash of content on page load */
    #configContent {
      visibility: hidden;
    }
    #configContent.collapse-ready {
      visibility: visible;
    }
  </style>
  <script>
    // Remember collapse state - run immediately to prevent FOUC
    (function () {
      const isCollapsed =
        localStorage.getItem("configPanelCollapsed") === "true";

      // Apply state immediately when DOM is ready
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", initCollapseState);
      } else {
        initCollapseState();
      }

      function initCollapseState() {
        const configContent = document.getElementById("configContent");
        const configHeader = document.querySelector(".config-header");

        if (!configContent) return;

        // Set initial state based on localStorage
        if (isCollapsed) {
          configContent.classList.remove("show");
          if (configHeader) {
            configHeader.classList.add("collapsed");
            configHeader.setAttribute("aria-expanded", "false");
          }
        }

        // Make visible now that state is set
        configContent.classList.add("collapse-ready");

        // Save state when toggled
        configContent.addEventListener("hidden.bs.collapse", function () {
          localStorage.setItem("configPanelCollapsed", "true");
        });

        configContent.addEventListener("shown.bs.collapse", function () {
          localStorage.setItem("configPanelCollapsed", "false");
        });
      }
    })();
  </script>
  <div
    class="config-header p-4 d-flex justify-content-between align-items-center"
    data-bs-toggle="collapse"
    data-bs-target="#configContent"
    aria-expanded="true"
    aria-controls="configContent"
  >
    <h3 class="mb-0">üîß Configuration</h3>
    <span class="collapse-icon">‚ñº</span>
  </div>
  <div class="collapse show" id="configContent">
    <div class="p-4 pt-0">
      <div class="row g-3 mb-3">
        <div class="col-md-3">
          <label class="form-label fw-bold">Client Type</label>
          <select
            x-model="clientType"
            @change="onClientTypeChange()"
            class="mt-2 form-select form-select-lg bg-dark text-light rounded"
            style="height: 48px; min-height: 48px; border-width: 1px"
          >
            <option value="all" class="p-5">Show All</option>
            <option value="curl">cURL</option>
            <option value="httpie">HTTPie</option>
            <option value="javascript">JavaScript</option>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label fw-bold">RESTHeart URL</label>
          <input
            type="text"
            x-model="instanceUrl"
            @input="onInputChange()"
            class="mt-2 form-control form-control-lg bg-dark text-light"
            placeholder="https://your-api-url.restheart.com"
          />
        </div>
        <div class="col-md-3">
          <label class="form-label fw-bold">Username</label>
          <input
            type="text"
            x-model="username"
            @input="onInputChange()"
            class="mt-2 form-control form-control-lg bg-dark text-light"
            placeholder="your_username"
          />
        </div>
        <div class="col-md-3">
          <label class="form-label fw-bold">Password</label>
          <input
            type="text"
            style="text-security: disc; -webkit-text-security: disc"
            x-model="password"
            @input="onInputChange()"
            class="mt-2 form-control form-control-lg bg-dark text-light"
            placeholder="your_password"
          />
        </div>
      </div>

      <div class="mt-3 d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center gap-1">
          <button @click="setLocalhostDefaults()" class="btn me-2 p-0">
            üè†Localhost
          </button>
          <small class="text-muted"
            >Sets localhost:8080 with admin:secret</small
          >
        </div>
        <div class="d-flex align-items-center gap-1">
          <button @click="clearValues()" class="btn p-0">üßπClear Values</button>
          <small class="text-muted ms-2"
            >Values are saved in your browser</small
          >
        </div>
      </div>
    </div>
  </div>
</div>
