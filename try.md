---
layout: page-notitle
title: Try
permalink: /try.html
---

# Angular Example

<div id="demo"></div>

<script type="text/javascript">
StackBlitzSDK.embedProjectId('demo', 'restheart-ng-demo', {
  openFile: 'src/app/service.ts',
  view: 'preview',
  width: "100%",
  height: "600px",
  hideNavigation: true,
  forceEmbedLayout: true
});
</script>

# Try it from the command line

The demo database exposes a the messages collection at <a href="https://beta.mrest.io/browser/#/demo/messages?hal=f"><code>https://beta.mrest.io</code></a> without requiring authentication. Access to any other MongoDB resource is forbidden.

<code>mrest.io</code> is an upcoming managed service for RESTHeart.

The demo instance requires an api key, passed via request header <code>key:demo</code>

This demo instance is reset on regular basis, so feel free to play with it <b>but don't rely on it for persistent storage of your data</b>.
{: .bs-callout .bs-callout-info }

<div class="row mt-3">
    <div class="col-lg-3 pt-2">
        <p><strong>Insert or update</strong> the document with _id <i>docid</i><br />
        <code>PUT /db/coll/docid</code></p>
    </div>
    <div class="col-lg-9">
{% highlight bash %}

$ curl -i -H "key:demo" -H "Content-Type:application/json" -X PUT https://beta.mrest.io/demo/messages/docid -d '{"from":"you", "message":"RESTHeart rocks!!" }'

HTTP/1.1 201 Created
...

{% endhighlight %}
    <a href="http://restninja.io/share/607325d540eaa2eac909116d619be26ad21a9055/0" class="btn btn-sm float-right" target="_blank">Open on rest ninja</a>
    </div>
</div>

<div class="row mt-3">
    <div class="col-lg-3 pt-2">
        <p><strong>Get</strong> the created document</p>
    </div>
    <div class="col-lg-9">
{% highlight bash %}

$ curl -i -H "key:demo" https://beta.mrest.io/demo/messages/docid

{
	"_id": "docid",
	"from": "you",
	"message": "RESTHeart rocks"
}

{% endhighlight %}
    <a href="https://restninja.io/share/7da53c179386d7df995c1e5574984d700cc0aef7/0" class="btn btn-sm float-right" target="_blank">Open on rest ninja</a>
    </div>
</div>

<div class="row mt-3">
    <div class="col-lg-3 pt-2">
        <p><strong>Create</strong> a second document with <code>POST /db/coll</code></p>
        <p>If the _id is not specified in the request body, it will be autogenerated as a new ObjectId. The <code>Location</code> response header specifies the URL of the new document.</p>
    </div>
    <div class="col-lg-9">
{% highlight bash %}

$ curl -i -H "key:demo" -H "Content-Type:application/json" -X POST https://beta.mrest.io/demo/messages -d '{"from":"you", "message": "MongoDB rocks as well!"}'

HTTP/1.1 201 Created
Location: https://beta.mrest.io/demo/messages/563a40d6e4b0ef984cae182b
...

{% endhighlight %}
    <a href="http://restninja.io/share/1fd808b1f51037c8b2b36d43d6bc315a0325029c/0" class="btn btn-sm float-right" target="_blank">Open on rest ninja</a>
    </div>
</div>

<div class="row mt-3">
    <div class="col-lg-3 pt-2">
        <p><strong>Update</strong> the first document with <code>PATCH /db/coll/docid</code></p>
        <p>This request uses the dot notation and the <code>$currentDate</code> operator. These are available in all write requests!</p>
    </div>
    <div class="col-lg-9">
{% highlight bash %}

$ curl -i -H "key:demo" -H "Content-Type:application/json" -X PATCH https://beta.mrest.io/demo/messages/docid -d '{"$currentDate": { "header.timestamp": true}}'

HTTP/1.1 200 OK
...

{% endhighlight %}
    <a href="http://restninja.io/share/69ddd0c6d311ae99d6596f46d092556f324635d2/0" class="btn btn-sm float-right" target="_blank">Open on rest ninja</a>
    </div>
</div>

<div class="row mt-3">
    <div class="col-lg-3 pt-2">
        <p><strong>Get</strong> the updated document again.</p>
        <p>The returned representation contains all the document properties plus few more. The <code>_etag</code> is updated automatically by RESTHeart for Web caching and ghost writes management.</p>
    </div>
    <div class="col-lg-9">
{% highlight bash %}

$ curl -i -H "key:demo" https://beta.mrest.io/demo/messages/docid

{
	"_id": "docid",
	"from": "you",
	"message": "RESTHeart rocks!!",
	"header": {
		"timestamp": {
			"$date": 1475598488601
		}
	}
}

{% endhighlight %}
    <a href="https://restninja.io/share/7da53c179386d7df995c1e5574984d700cc0aef7/0" class="btn btn-sm float-right" target="_blank">Open on rest ninja</a>
    </div>
</div>

<div class="row mt-3">
    <div class="col-lg-3 pt-2">
        <p><strong>Find</strong> documents via query.</p>
        <p>The <code>filter</code> query parameter allows to specify any MongoDB query.</p>
        <p>This instance of RESTHeart is configured to always add the <code>np</code> query parameter to the request; it gets rid of the collection properties and 
        returns just an array of documents.</p>
    </div>
    <div class="col-lg-9">
{% highlight bash %}

$ curl -H "key:demo" -G --data-urlencode "filter={'from':'you'}" https://beta.mrest.io/demo/messages?pagesize=2

[   {
		"_id": "docid",
		"from": "you",
		"message": "RESTHeart rocks!",
		"header": {
			"timestamp": {
				"$date": 1475598488601
			}
		}
	}, {
		"_id": {
			"$oid": "563a40d6e4b0ef984cae182b"
		},
		"from": "you",
		"message": "MongoDB rocks as well!"
	}    
]

{% endhighlight %}
    <a href="http://restninja.io/share/694a0a5c4ae939230544d6dee093d72d27ae2dae/3" class="btn btn-sm float-right mb-2" target="_blank">Open on rest ninja</a>
    </div>
</div>