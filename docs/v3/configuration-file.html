<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->

<html lang="en">
<!--<![endif]-->
<head>
   <meta charset="utf-8">
   <title>RESTHeart - Configuration File</title>
   <meta name="description" content="Low code API Framework for MongoDB">
   <meta name="author" content="SoftInstigate srl">
   <meta name="keywords" content="restheart,mongodb,rest,,graphql,api,http,microservice,java,framework">
   <!-- Open Graph -->
   <meta property="og:type" content="website">
   <meta property="og:url" content="https://restheart.org">
   <meta property="og:logo" content="/images/restheart logo.svg">
   <meta property="og:title" content="RESTHeart - Configuration File">
   <meta property="og:description" content="Low code API Framework for MongoDB">
   <meta property="og:locale" content="en">
   
   <!-- avoid search engine indexing of old documentation pages  -->
   <meta name="robots" content="noindex,nofollow">
   
   <!-- Mobile Specific Metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <!-- icon fonts -->
   <script src="/js/fontawesome.com_c39cf060d4.js"></script>
   <link type="text/css" rel="stylesheet" href="/font-icons/custom-icons/css/custom-icons.css">
   <link type="text/css" rel="stylesheet" href="/font-icons/custom-icons/css/custom-icons-ie7.css">
   <!-- Custom css -->
   <link rel="stylesheet" type="text/css" href="/css/main.css">
   <!-- js ================================================== -->
   <script src="https://code.jquery.com/jquery.min.js"></script>
   <script src="/assets/js/bootstrap.bundle.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
   <script src="https://unpkg.com/@stackblitz/sdk/bundles/sdk.umd.js"></script>
   <script src="/js/carousel.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick.min.js"></script>
   <!-- Github buttons. -->
   <script async defer src="https://buttons.github.io/buttons.js"></script>
   <!--iframeResizer-->
  <script src="/assets/js/iframe-resizer.parent.js"></script>
   <!-- Favicons ================================================== -->
  <link rel="icon" type="image/svg+xml" href="/images/restheart logo.svg" />
  <link rel="shortcut icon" href="/images/favicon/favicon.png" />
  <link rel="canonical" href="https://restheart.org/docs/v3/configuration-file">
  <link rel="alternate" type="application/atom+xml" title="RESTHeart - API Framework" href="https://restheart.org/feed.xml" />
  <script defer data-domain="restheart.org" src="https://plausible.io/js/script.js"></script>
</head>


<body>
    <header id="mainHeader" class="fixed-top background-primary" role="banner">
    <div class="container-fluid">
        <nav class="navbar navbar-default scrollMenu navbar-expand-lg" role="navigation">
            <a class="navbar-brand" href="/">
                <h2 class="text-white"><strong>REST</strong>Heart</h2>
            </a>
            <!-- Place this tag where you want the button to render. -->
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target=".navbar-ex1-collapse"><span
                    class="sr-only">Toggle navigation</span> &#x2630;</button>
            <div class="collapse navbar-collapse navbar-ex1-collapse background-primary" id="scrollTarget">
                <ul class="nav navbar-nav ml-md-auto">
                    <!-- only bounce slack button on home page-->
                    
                    

                    <li class="nav-item ml-1 ml-lg-2 ml-xl-4 mb-0 pb-0 ">
                        <a class="github-button" href="https://github.com/SoftInstigate/restheart" data-size="large" data-show-count="true" aria-label="Star SoftInstigate/restheart on GitHub"></a>
                    </li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/sophia">Ask Sophia</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs">Docs</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/faq">FAQ</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/setup-with-docker/">GET</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/contact">Contacts</a></li>
                </ul>
            </div>
        </nav>
    </div>
</header>

<div class="alert alert-warning m-0 text-center" role="alert">
    <strong>RESTHeart 8 is the current stable release. Switch documentation to <a href="/docs">v8</a></strong>
</div>



<a  target="_blank" class="gitter-open-chat-button fixed-bottom-right" href="https://join.slack.com/t/restheart/shared_invite/zt-1olrhtoq8-5DdYLBWYDonFGEALhmgSXQ"></a>


    <div class="page-content">
        <div class="container-fluid imgHover doc">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
            <div class="bd-sidebar__head">
                <div class="dropdown d-flex justify-content-center w-100">
                    <button class="btn btn-secondary dropdown-toggle w-100 p-1 mb-2" type="button"
                        id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        v3
                    </button>
                    <div class="dropdown-menu mt-2 mr-1 pb-2" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="/docs">
                            
                            v8
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v7">
                            
                            v7
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v6">
                            
                            v6
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v5">
                            
                            v5
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v4">
                            
                            v4
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v3">
                            
                            <strong>v3</strong>
                            
                        </a>
                    </div>
                </div>
                <form action="https://www.google.com/search" class="form bd-sidebar__search d-flex" method="get"
                    name="searchform" target="_blank">
                    <input name="sitesearch" type="hidden" value="restheart.org/docs">
                    <input autocomplete="on" class="form-control input-sm search bd-sidebar__input" name="q"
                        placeholder="Search" required="required" type="text">
                    <button class="bd-sidebar__submit" type="submit">
                        <svg width="16" height="16">
                            <use xlink:href="/images/sprite.svg#search" /></svg>
                    </button>
                </form>
                <div class="d-flex flex-wrap justify-content-between align-items-center">
                    <a href="https://github.com/SoftInstigate/restheart-website/edit/master/docs/v3/configuration-file.md"
                        class="small mt-2 mb-1 ml-lg-auto"><i class="icon-pencil"></i>Edit Page</a>
                    <button class="btn btn-link bd-sidebar__toggle navbar-expand-md p-0 mb-1 d-md-none" type="button"
                        data-toggle="collapse" data-target="#bd-sidebar__menu" aria-controls="bd-sidebar__menu"
                        aria-expanded="false" aria-label="Toggle docs navigation">
                        Table of Contents
                        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 30 30" width="30" height="30"
                            focusable="false">
                            <title>Menu</title>
                            <path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10"
                                d="M4 7h22M4 15h22M4 23h22" />
                        </svg>
                    </button>
                </div>
            </div>

            <div class="bd-sidebar__menu collapse d-md-block" id="bd-sidebar__menu">
                
                    <h2 id="installation-and-configuration">Installation and Configuration</h2>
<ul>
    <li><a href="/docs/v3/setup">Setup</a></li>
    <li><a href="/docs/v3/configuration-file">Configuration File</a></li>
    <li><a href="/docs/v3/security">Security</a></li>
    <li><a href="/docs/v3/roadmap">Roadmap</a></li>
</ul>

<h2 id="api">API</h2>
<ul>
    <li><a href="/docs/v3/tutorial">Tutorial</a></li>
    <li><a href="/docs/v3/resource-uri">Resource URIs</a></li>
    <li><a href="/docs/v3/representation-format">Representation Format</a></li>
    <li><a href="/docs/v3/quick-reference">Quick Rererence</a></li>
    <li><a href="/docs/v3/query-documents">Query Documents</a></li>
    <li><a href="/docs/v3/write-requests">Write Requests</a></li>
    <li><a href="/docs/v3/files-buckets">Files Bucket (GridFS)</a></li>
    <li><a href="/docs/v3/indexes">Collection Indexes</a></li>
    <li><a href="/docs/v3/etag">ETag</a></li>
    <li><a href="/docs/v3/shard-keys">Shard Keys</a></li>
</ul>

<h2 id="advanced-topics">Advanced Topics</h2>
<ul>
    <li><a href="/docs/v3/aggregations">Aggregations</a></li>
    <li><a href="/docs/v3/request-transformers">Request Transformers</a></li>
    <li><a href="/docs/v3/request-checkers">Request Checkers</a></li>
    <li><a href="/docs/v3/json-schema-validation">Document validation with JSON schema</a></li>
    <li><a href="/docs/v3/application-logic">Application Logic</a></li>
    <li><a href="/docs/v3/initializer">Initializer</a></li>
    <li><a href="/docs/v3/request-hooks">Request Hooks</a></li>
    <li><a href="/docs/v3/relationships">Relationships</a></li>
    <li><a href="/docs/v3/custom-code-packaging-howto">How to package custom code</a></li>
</ul>

<h2 id="misc">Misc</h2>
<ul>
    <li><a href="/docs/v3/cors-support">CORS Support</a></li>
    <li><a href="/docs/v3/requests-metrics">Metrics on Requests</a></li>
    <li><a href="/docs/v3/speedup-requests-with-cursor-pools">Speedup Requests with Cursor Pools</a></li>
    <li><a href="/docs/v3/performances">Performances</a></li>
    <li><a href="/docs/v3/example-angularjs-app">An example AngularJs application</a></li>
    <li><a href="/docs/v3/opentracing">Opentracing / zipkin headers support</a></li>
</ul>
                
            </div>
        </div>
        <div class="d-none d-xl-block col-xl-2 order-last bd-toc">

  <ul>
    <li><a href="#sample-configuration-file">Sample configuration file</a></li>
    <li><a href="#configuration-options">Configuration options</a>
      <ul>
        <li><a href="#properties-files">Properties files</a></li>
        <li><a href="#environment-variables">Environment variables</a></li>
        <li><a href="#command-line-parameters">Command line parameters</a></li>
      </ul>
    </li>
  </ul>

</div>

<div class="col-12 col-md-9 col-xl-8 py-md-3 bd-content">

  <div class="docs-head d-flex align-items-center justify-content-between">
    <h2 class="d-flex align-items-center m-0 pr-3">
        <span>Configuration File</span>
    </h2>
</div>

  <h2 id="sample-configuration-file">Sample configuration file</h2>

  <p>An example of a complete configuration file is <a href="https://github.com/SoftInstigate/restheart/core/etc/restheart.yml">available here</a>.</p>

  <h2 id="configuration-options">Configuration options</h2>

  <p><strong>Note</strong>: The following options are fully available from RESTHeart <a href="https://github.com/SoftInstigate/restheart/releases/tag/3.7.0">version 3.7.0</a>.</p>

  <h3 id="properties-files">Properties files</h3>

  <p>Starting from RESTHeart <code class="language-plaintext highlighter-rouge">3.7.0</code> it is possibile to pass an optional <a href="https://docs.oracle.com/javase/tutorial/essential/environment/properties.html">properties file</a> (following the Java Properties syntax) as a startup parameter, via a OS environment variable or, starting with RESTHeart 3.9, via a Java property (which you can pass to the JVM with the “-D” command line parameter). This has proven to be very useful when RESTHeart is deployed in several environments and the configuration files are just slightly different among the environments. In the past was necessary to copy and paste any modification on all the yaml configuration files, but now you can have a single parametric yaml file, with a set of small, different properties files for each environment.</p>

  <p>For example, the <code class="language-plaintext highlighter-rouge">dev.properties</code> file in <code class="language-plaintext highlighter-rouge">etc/</code> folder contains the following properties:</p>

  <div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">instance-name</span> <span class="p">=</span> <span class="s">development</span>
<span class="py">default-representation-format</span> <span class="p">=</span> <span class="s">PLAIN_JSON</span>
<span class="py">mongo-uri</span> <span class="p">=</span> <span class="s">mongodb://127.0.0.1</span>
<span class="py">idm.conf-file</span> <span class="p">=</span> <span class="s">../etc/security.yml</span>
<span class="py">access-manager.conf-file</span> <span class="p">=</span> <span class="s">../etc/security.yml</span>
<span class="py">log-level</span> <span class="p">=</span> <span class="s">DEBUG</span>
<span class="py">query-time-limit</span> <span class="p">=</span> <span class="s">0</span>
<span class="py">aggregation-time-limit</span> <span class="p">=</span> <span class="s">0</span>
</code></pre></div>  </div>

  <p>The <a href="https://github.com/SoftInstigate/restheart/blob/master/core/etc/restheart.yml"><code class="language-plaintext highlighter-rouge">restheart.yml</code></a> file contains the above parameters, expressed with the “Mustache syntax” (triple curly braces to indicate parametric values). Have a look at the below fragment for an example:</p>

  <figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">instance-name</span><span class="pi">:</span> <span class="pi">{{{</span><span class="nv">instance-name</span><span class="pi">}}}</span>

<span class="na">default-representation-format</span><span class="pi">:</span> <span class="pi">{{{</span><span class="nv">default-representation-format</span><span class="pi">}}}</span>

<span class="na">mongo-uri</span><span class="pi">:</span> <span class="pi">{{{</span><span class="nv">mongo-uri</span><span class="pi">}}}</span>

<span class="na">idm</span><span class="pi">:</span>
  <span class="na">implementation-class</span><span class="pi">:</span> <span class="s">org.restheart.security.impl.SimpleFileIdentityManager</span>
  <span class="na">conf-file</span><span class="pi">:</span> <span class="pi">{{{</span><span class="nv">idm.conf-file</span><span class="pi">}}}</span>
<span class="na">access-manager</span><span class="pi">:</span>
  <span class="na">implementation-class</span><span class="pi">:</span> <span class="s">org.restheart.security.impl.SimpleAccessManager</span>
  <span class="na">conf-file</span><span class="pi">:</span> <span class="pi">{{{</span><span class="nv">access-manager.conf-file</span><span class="pi">}}}</span>

<span class="na">log-level</span><span class="pi">:</span> <span class="pi">{{{</span><span class="nv">log-level</span><span class="pi">}}}</span>

<span class="na">query-time-limit</span><span class="pi">:</span> <span class="pi">{{{</span><span class="nv">query-time-limit</span><span class="pi">}}}</span>

<span class="na">aggregation-time-limit</span><span class="pi">:</span> <span class="pi">{{{</span><span class="nv">aggregation-time-limit</span><span class="pi">}}}</span></code></pre></figure>

  <p>The implementation uses the <a href="https://github.com/spullara/mustache.java">Mustache.java</a> library, which is a derivative of <a href="http://mustache.github.io">mustache.js</a>, to create parametric configurations for RESTHeart.</p>

  <p>Of course, you can decide which values in <code class="language-plaintext highlighter-rouge">restheart.yml</code> you want to become parametric or you can just use a static file
 as before version 3.7, this new configuration with properties is fully optional.</p>

  <p>To start RESTHeart and provide it with a properties file pass the <code class="language-plaintext highlighter-rouge">--envfile</code> command line parameter:</p>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java -Dfile.encoding=UTF-8 -server -jar target/restheart.jar etc/restheart.yml --envfile etc/dev.properties
</code></pre></div>  </div>

  <p>Alternatively, pass the envfile path via <code class="language-plaintext highlighter-rouge">RESTHEART_ENVFILE</code> environment variable:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">export </span><span class="nv">RESTHEART_ENVFILE</span><span class="o">=</span>etc/dev.properties
<span class="nv">$ </span>java <span class="nt">-Dfile</span>.encoding<span class="o">=</span>UTF-8 <span class="nt">-server</span> <span class="nt">-jar</span> target/restheart.jar etc/restheart.yml
</code></pre></div>  </div>

  <p><strong>Note</strong>: starting with release 3.9 it’s possibile to pass also the main RESTHeart’s configuration file via the <code class="language-plaintext highlighter-rouge">RESTHEART_CONFFILE</code> environment variable, for example:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">export </span><span class="nv">RESTHEART_CONFFILE</span><span class="o">=</span>etc/restheart.yml
</code></pre></div>  </div>

  <p>This approach allows to share one single configuration file among several environments. For example, one could create <code class="language-plaintext highlighter-rouge">dev.properties</code>, <code class="language-plaintext highlighter-rouge">test.properties</code> and <code class="language-plaintext highlighter-rouge">production.properties</code>, one for each environment, with one single common <code class="language-plaintext highlighter-rouge">restheart.yml</code> configuration file.</p>

  <h3 id="environment-variables">Environment variables</h3>

  <p>RESTHeart <code class="language-plaintext highlighter-rouge">3.7.0</code> introduces also the possibility to override any <strong>primitive type parameter</strong> in <code class="language-plaintext highlighter-rouge">restheart.yml</code> with an environment variable. Primitive types are:</p>

  <ul>
    <li>String</li>
    <li>Integer</li>
    <li>Long</li>
    <li>Boolean</li>
  </ul>

  <p>For example, the parameter <code class="language-plaintext highlighter-rouge">mongo-uri</code> in the yaml file can be overridden by exporting a <code class="language-plaintext highlighter-rouge">MONGO_URI</code> environment variable:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">export </span><span class="nv">MONGO_URI</span><span class="o">=</span><span class="s2">"mongodb://127.0.0.1"</span>
</code></pre></div>  </div>

  <p>The following log entry appears at the very beginning of logs during the startup process:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>main] WARN  org.restheart.Configuration - <span class="o">&gt;&gt;&gt;</span> Overriding parameter <span class="s1">'mongo-uri'</span> with environment value <span class="s1">'MONGO_URI=mongodb://127.0.0.1'</span>
</code></pre></div>  </div>

  <p>A shell environment variable is equivalent to a yaml parameter in <code class="language-plaintext highlighter-rouge">restheart.yml</code>, but it’s all uppercase and <code class="language-plaintext highlighter-rouge">'-'</code> (dash) are replaced with <code class="language-plaintext highlighter-rouge">'_'</code> (underscore).</p>

  <p><strong>Remember</strong>: <em>environment variables replacement doesn’t work with YAML structured data in configuration files, like arrays or maps. You must use properties files and mustache syntax for that.</em></p>

  <h3 id="command-line-parameters">Command line parameters</h3>

  <p>To know the available CLI parameters, run RESTHeart with <code class="language-plaintext highlighter-rouge">--help</code>:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>java <span class="nt">-jar</span> target/restheart.jar <span class="nt">--help</span>
Usage: java <span class="nt">-Dfile</span>.encoding<span class="o">=</span>UTF-8 <span class="nt">-jar</span> <span class="nt">-server</span> restheart.jar <span class="o">[</span>options] 
      &lt;Configuration file&gt;
  Options:
    <span class="nt">--envFile</span>, <span class="nt">--envfile</span>, <span class="nt">-e</span>
      Environment file name
    <span class="nt">--fork</span>
      Fork the process
      Default: <span class="nb">false</span>
    <span class="nt">--help</span>, -?
      This <span class="nb">help </span>message
</code></pre></div>  </div>

</div>

    </div>
</div>
    </div>

    <footer class="bs-docs-footer mt-0">
  <!-- <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + '://platform.twitter.com/widgets.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'twitter-wjs');</script> -->
  <div id="fb-root"></div>
  <section id="mainFooter">
    <div class="container-fluid">
      <div>
        <div class="bs-docs-social">
          <ul class="socialNetwork">
            <li class="ml-auto">
              <a href="https://twitter.com/softinstigate" class="tips" title="Follow us on Twitter" data-original-title="follow us on Twitter"
                target="_blank">
                <svg class="socialNetwork__icon"><use xlink:href="/images/sprite.svg#twitter" /></svg>
              </a>
            </li>
            <li>
              <a href="https://github.com/softinstigate/restheart" class="tips" title="Get the source code" data-original-title="get the source code"
                target="_blank">
                <svg class="socialNetwork__icon"><use xlink:href="/images/sprite.svg#github" /></svg>
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div>
        Made with
        <!--<span class="glyphicon glyphicon-heart"></span>-->
        <svg class="footer__like"><use xlink:href="/images/sprite.svg#like" /></svg>
        by
        <a href="https://www.softinstigate.com" target="_blank">SoftInstigate</a>
      </div>
      <div>
        <a href="https://softinstigate.com/en/privacy" class="mr-2 small">Privacy Policy</a>
        <a href="https://www.iubenda.com/privacy-policy/15571002/cookie-policy" class="small iubenda-nostyle no-brand iubenda-embed " title="Cookie Policy">Cookie Policy</a>
      </div>
    </section>
</footer>

    <!-- End Document ================================================== -->
</body>

</html>
<!-- add copy button on code snippet -->
<script src="/assets/js/clipboard.min.js"></script>
<style>
    .listingblock:hover .clipboard {
        display: block;
    }

    .clipboard {
        display: none;
        border: 0;
        font-size: .75em;
        text-transform: uppercase;
        font-weight: 800;
        padding: 2px;
        color: #999;
        position: absolute;
        top: 6px;
        right: 10px;
        background: transparent;
    }

    code + .clipboard {
        padding: 0;
    }

    .clipboard:hover, .clipboard:focus, .clipboard:active {
        outline: 0;
        color: white;
        /* background-color: #eee9e6; */
    }
</style>
<!-- add copy button on code snippet -->
<script>
    window.onload = function() {
        function target(b) {
            var p = b.parentNode;
            if (p.className.includes("highlight")) {
                var elems = p.getElementsByTagName("code");
                if (elems.length > 0) {
                    return elems[0];
                }
            }
            return p.childNodes[0];
        }

        var pre = document.getElementsByTagName('pre');
        for (var i = 0; i < pre.length; i++) {
            var b = document.createElement('button');
            b.className = 'clipboard';
            b.textContent = 'Copy';
            // b.innerHTML = '<i style="font-size:18px" class="icon-clipboard"></i>';
            if (pre[i].childNodes.length === 1 && pre[i].childNodes[0].nodeType === 3) {
                var div = document.createElement('div');
                div.textContent = pre[i].textContent;
                pre[i].textContent = '';
                pre[i].appendChild(div);
            }
            pre[i].appendChild(b);
        }

        var clipboard = new ClipboardJS('.clipboard', {
            // this custom text function, remove any line that doesn't start with $
            text: function (trigger) {
                var t = target(trigger);
                const text = target(trigger).outerText;

                if (text) {
                    const dataLang = t.getAttribute('data-lang');
                    if (dataLang === 'bash') {
                        return text
                            .replace(/^(?!\$.*$).*/gm, '') // remove lines that don't start with $
                            .replace(/^\$ */gm, '') // remove leading $
                            .replace(/^\s*[\r\n]/gm, '') // remove blank lines
                            .replace(/^\s+|\s+$/gm, ''); // trim string
                    }
                }
            },
            target: target
        });
        clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.textContent = 'Copied';
            setTimeout(function() {
                e.trigger.textContent = 'Copy';
            }, 2000);
        });
        clipboard.on('error', function(e) {
            console.error('Action:', e.action, e);
            console.error('Trigger:', e.trigger);
        });
    };
</script>