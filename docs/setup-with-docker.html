<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->

<html lang="en">
<!--<![endif]-->
<head>
   <meta charset="utf-8">
   <title>RESTHeart - Setup with Docker</title>
   <meta name="description" content="Low code API Framework for MongoDB">
   <meta name="author" content="SoftInstigate srl">
   <meta name="keywords" content="restheart,mongodb,rest,,graphql,api,http,microservice,java,framework">
   <!-- Open Graph -->
   <meta property="og:type" content="website">
   <meta property="og:url" content="https://restheart.org">
   <meta property="og:logo" content="/images/restheart logo.svg">
   <meta property="og:title" content="RESTHeart - Setup with Docker">
   <meta property="og:description" content="Low code API Framework for MongoDB">
   <meta property="og:locale" content="en">
   
   <!-- Mobile Specific Metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <!-- icon fonts -->
   <script src="/js/fontawesome.com_c39cf060d4.js"></script>
   <link type="text/css" rel="stylesheet" href="/font-icons/custom-icons/css/custom-icons.css">
   <link type="text/css" rel="stylesheet" href="/font-icons/custom-icons/css/custom-icons-ie7.css">
   <!-- Custom css -->
   <link rel="stylesheet" type="text/css" href="/css/main.css">
   <!-- js ================================================== -->
   <script src="https://code.jquery.com/jquery.min.js"></script>
   <script src="/assets/js/bootstrap.bundle.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
   <script src="https://unpkg.com/@stackblitz/sdk/bundles/sdk.umd.js"></script>
   <script src="/js/carousel.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick.min.js"></script>
   <!-- Github buttons. -->
   <script async defer src="https://buttons.github.io/buttons.js"></script>
   <!--iframeResizer-->
  <script src="/assets/js/iframe-resizer.parent.js"></script>
   <!-- Favicons ================================================== -->
  <link rel="icon" type="image/svg+xml" href="/images/restheart logo.svg" />
  <link rel="shortcut icon" href="/images/favicon/favicon.png" />
  <link rel="canonical" href="https://restheart.org/docs/setup-with-docker">
  <link rel="alternate" type="application/atom+xml" title="RESTHeart - API Framework" href="https://restheart.org/feed.xml" />
  <script defer data-domain="restheart.org" src="https://plausible.io/js/script.js"></script>
</head>


<body>
    <header id="mainHeader" class="fixed-top background-primary" role="banner">
    <div class="container-fluid">
        <nav class="navbar navbar-default scrollMenu navbar-expand-lg" role="navigation">
            <a class="navbar-brand" href="/">
                <h2 class="text-white"><strong>REST</strong>Heart</h2>
            </a>
            <!-- Place this tag where you want the button to render. -->
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target=".navbar-ex1-collapse"><span
                    class="sr-only">Toggle navigation</span> &#x2630;</button>
            <div class="collapse navbar-collapse navbar-ex1-collapse background-primary" id="scrollTarget">
                <ul class="nav navbar-nav ml-md-auto">
                    <!-- only bounce slack button on home page-->
                    
                    

                    <li class="nav-item ml-1 ml-lg-2 ml-xl-4 mb-0 pb-0 ">
                        <a class="github-button" href="https://github.com/SoftInstigate/restheart" data-size="large" data-show-count="true" aria-label="Star SoftInstigate/restheart on GitHub"></a>
                    </li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/sophia">Ask Sophia</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs">Docs</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/faq">FAQ</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/setup-with-docker/">GET</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/contact">Contacts</a></li>
                </ul>
            </div>
        </nav>
    </div>
</header>



<a  target="_blank" class="gitter-open-chat-button fixed-bottom-right" href="https://join.slack.com/t/restheart/shared_invite/zt-1olrhtoq8-5DdYLBWYDonFGEALhmgSXQ"></a>


    <div class="page-content">
        <div class="container-fluid imgHover doc">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
            <div class="bd-sidebar__head">
                <div class="dropdown d-flex justify-content-center w-100">
                    <button class="btn btn-secondary dropdown-toggle w-100 p-1 mb-2" type="button"
                        id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        v8
                    </button>
                    <div class="dropdown-menu mt-2 mr-1 pb-2" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="/docs">
                            
                            <strong>v8</strong>
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v7">
                            
                            v7
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v6">
                            
                            v6
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v5">
                            
                            v5
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v4">
                            
                            v4
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v3">
                            
                            v3
                            
                        </a>
                    </div>
                </div>
                <form action="https://www.google.com/search" class="form bd-sidebar__search d-flex" method="get"
                    name="searchform" target="_blank">
                    <input name="sitesearch" type="hidden" value="restheart.org/docs">
                    <input autocomplete="on" class="form-control input-sm search bd-sidebar__input" name="q"
                        placeholder="Search" required="required" type="text">
                    <button class="bd-sidebar__submit" type="submit">
                        <svg width="16" height="16">
                            <use xlink:href="/images/sprite.svg#search" /></svg>
                    </button>
                </form>
                <div class="d-flex flex-wrap justify-content-between align-items-center">
                    <a href="https://github.com/SoftInstigate/restheart-website/edit/master/docs/setup-with-docker.adoc"
                        class="small mt-2 mb-1 ml-lg-auto"><i class="icon-pencil"></i>Edit Page</a>
                    <button class="btn btn-link bd-sidebar__toggle p-0 mb-1 d-md-none" type="button"
                        data-toggle="collapse" data-target="#bd-sidebar__menu" aria-controls="bd-sidebar__menu"
                        aria-expanded="false" aria-label="Toggle docs navigation">
                        Table of Contents
                        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 30 30" width="30" height="30"
                            focusable="false">
                            <title>Menu</title>
                            <path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22" />
                        </svg>
                    </button>
                </div>
            </div>

            <nav class="bd-sidebar__menu collapse d-md-block" id="bd-sidebar__menu">
                
                    
<a data-toggle="collapse" href="#overview" role="button" aria-expanded="false" aria-controls="collapseExample">
    <h2>Overview</h2>
</a>
<ul id="overview" class="collapse">
    <li><a href="/docs/upgrade-to-v8"><strong>Upgrade to v8</strong></a></li>
    <li><a href="/docs">Overview</a></li>
    <li><a href="/docs/faq">FAQ</a></li>
    <li><a href="/docs/mongodb-rest/demo-webapp">Demo WebApp with RESTHeart</a></li>
    <li><a href="/docs/performances">Performances</a></li>
    <li><a href="https://github.com/SoftInstigate/restheart/issues?q=is%3Aissue+is%3Aopen+label%3A%22feature+request%22">Roadmap</a></li>
    <li><a href="/docs/plugins/tutorial">Framework Tutorial</a></li>
    <li><a href="/docs/mongodb-rest/tutorial">REST API Tutorial</a></li>
    <li><a href="/docs/mongodb-graphql/tutorial">GraphQL API Tutorial</a></li>
    <li><a href="/docs/security/tutorial">Auth^2 Tutorial</a></li>
    <li><a href="/docs/example-webapps">Example Web Apps built with RESTHeart</a></li>
    <li><a href="/docs/blog-posts">Blog posts</a></li>
    <li><a href="/docs/video-tutorials">Video Tutorials</a></li>
</ul>

<a data-toggle="collapse" href="#setup" role="button" aria-expanded="false" aria-controls="collapseExample">
    <h2 class="mt-2">Setup</h2>
</a>
<ul id="setup" class="collapse">
    <li><a href="/docs/setup"><strong>Setup</strong></a></li>
    <li><a href="/docs/setup-with-docker">Setup with Docker</a></li>
    <li><a href="/docs/configuration">Configuration</a></li>
    <li><a href="/docs/default-configuration">Default Configuration</a></li>
    <li><a href="/docs/security/how-clients-authenticate">Client Authentication Howto</a></li>
    <li><a href="/docs/security/user-management">User Management</a></li>
    <li><a href="/docs/graalvm"><strong>GraalVM</strong></a></li>
    <li><a href="/docs/security/security-hardening"><strong>Security Hardening</strong></a></li>
    <li><a href="/docs/security/tls">Configure TLS</a></li>
    <li><a href="/docs/security/secure-connection-to-mongodb">Secure connection to MongoDB</a></li>
    <li><a href="/docs/proxy">Proxying requests</a></li>
    <li><a href="/docs/static-resources">Serving static resources</a></li>
    <li><a href="/docs/logging">Logging</a></li>
    <li><a href="/docs/monitoring">Monitoring</a></li>
    <li><a href="/docs/auditing">Auditing</a></li>
    <li><a href="/docs/clustering">Clustering &amp; Load Balancing</a></li>
    <li><a href="/docs/enterprise-license">Enterprise License</a></li>
</ul>

<a data-toggle="collapse" href="#framework" role="button" aria-expanded="false" aria-controls="collapseExample">
    <h2 class="mt-2">Framework</h2>
</a>
<ul id="framework" class="collapse">
    <!-- <li><a href="/docs/plugins/dev-env">Development Environment</a></li> -->
    <li><a href="/docs/plugins/overview">Overview</a></li>
    <li><a href="/docs/plugins/tutorial">Tutorial</a></li>
    <li><a href="/docs/plugins/deploy">How to deploy Plugins</a></li>
    <h3 id="rest-api" class="mt-2">Base Plugins</h2>
    <li><a href="/docs/plugins/services">Services</a></li>
    <li><a href="/docs/plugins/interceptors">Interceptors</a></li>
    <li><a href="/docs/plugins/providers">Providers</a></li>
    <li><a href="/docs/plugins/initializers">Initializers</a></li>
    <li><a href="/docs/plugins/core-plugins-js">Services and Inteceptors in JavaScript</a></li>
    <h3 id="rest-api" class="mt-2">Security Plugins</h2>
    <li><a href="/docs/security/overview">Overview</a></li>
    <li><a href="/docs/plugins/authentication-mechanisms">Authentication Mechanisms</a></li>
    <li><a href="/docs/plugins/authenticators">Authenticators</a></li>
    <li><a href="/docs/plugins/authorizers">Authorizers</a></li>
    <li><a href="/docs/plugins/token-managers">Token Managers</a></li>
</ul>

<a data-toggle="collapse" href="#security" role="button" aria-expanded="false" aria-controls="collapseExample">
    <h2 class="mt-2">Security Plugins</h2>
</a>
<ul id="security" class="collapse">
    <li><a href="/docs/security/tutorial">Auth^2 Tutorial</a></li>
    <li><a href="/docs/security/authentication">Authentication</a></li>
    <li><a href="/docs/security/authorization">Authorization</a></li>
    <li><a href="/docs/security/other-security-plugins">Other Security Plugins</a></li>
</ul>

<a  data-toggle="collapse" href="#mongodb" role="button" aria-expanded="false" aria-controls="collapseExample">
    <h2 class="mt-2">MongoDB Plugins</h2>
</a>
<ul id="mongodb" class="collapse">
    <h3 id="rest-api" class="mt-2">REST API</h2>
    <li><a href="/docs/mongodb-rest/tutorial">Getting Started</a></li>
    <li><a href="/docs/mongodb-rest/read-docs">Reading Documents</a></li>
    <li><a href="/docs/mongodb-rest/write-docs">Writing Documents</a></li>
    <li><a href="/docs/mongodb-rest/files">Managing Binary Files</a></li>
    <li><a href="/docs/mongodb-rest/aggregations">Aggregations</a></li>
    <li><a href="/docs/mongodb-rest/dbs-collections">Databases and Collections</a></li>
    <li><a href="/docs/mongodb-rest/indexes">Indexes</a></li>
    <li><a href="/docs/mongodb-rest/csv">CSV Import</a></li>
    <li><a href="/docs/mongodb-rest/transactions">Transactions</a></li>
    <li><a href="/docs/mongodb-rest/caching">Performance and Caching</a></li>
    <li><a href="/docs/mongodb-rest/relationships">Relationships</a></li>
    <li><a href="/docs/mongodb-rest/json-schema-validation">JSON Schema Validation</a></li>
    <li><a href="/docs/mongodb-rest/resource-uri">Resource URIs</a></li>
    <li><a href="/docs/mongodb-rest/representation-format">Representation Format</a></li>
    <li><a href="/docs/mongodb-rest/etag">ETag</a></li>
    <li><a href="/docs/mongodb-rest/shard-keys">Shard Keys</a></li>
    <li><a href="/docs/mongodb-rest/sample-data">Load Sample Data</a></li>

    <h3 id="rest-api" class="mt-2">GraphQL API</h3>
    <li><a href="/docs/mongodb-graphql/">Overview</a></li>
    <li><a href="/docs/mongodb-graphql/getting-started">Getting Started</a></li>
    <li><a href="/docs/mongodb-graphql/graphql-apps">App Definition</a>
        <ul>
            <li><a href="/docs/mongodb-graphql/schema">Schema Design</a></li>
            <li><a href="/docs/mongodb-graphql/mappings">MongoDB Mappings</a></li>
            <li><a href="/docs/mongodb-graphql/resolvers">Custom Resolvers</a></li>
        </ul>
    </li>
    <li><a href="/docs/mongodb-graphql/tutorial">Basic Tutorial</a></li>
    <li><a href="/docs/mongodb-graphql/complex-app-example">Advanced Example</a></li>
    <li><a href="/docs/mongodb-graphql/optimization">Performance Optimization</a></li>
    <li><a href="/docs/mongodb-graphql/best-practices">Best Practices</a></li>

    <h3 id="rest-api" class="mt-2">Websocket API</h3>
    <li><a href="/docs/mongodb-websocket/">Overview</a></li>
    <li><a href="/docs/mongodb-websocket/change-streams">Streams definition</a></li>
    <li><a href="/docs/mongodb-websocket/variables">Variables</a></li>
    <li><a href="/docs/mongodb-websocket/examples">Examples</a></li>
</ul>

<style>
.collapsing {
    -webkit-transition: none;
    transition: none;
    display: none;
}
</style>

<script type="text/javascript">
    // on page load, show the menu element of the current pages
    const menu = 'setup';
    if (menu) {
        $(`#${menu}`).collapse('show');
    }
</script>

                
            </nav>
        </div>

        <div class="d-none d-xl-block col-xl-2 order-last bd-toc">
            <ul class="sectlevel2">
<li><a href="#run-with-docker-compose">Run with docker compose</a></li>
<li><a href="#run-restheart-with-docker-in-standalone-mode">Run RESTHeart with Docker in standalone mode</a></li>
<li><a href="#run-restheart-with-docker-mongodb-running-on-localhost">Run RESTHeart with Docker, MongoDB running on localhost</a></li>
<li><a href="#run-restheart-and-network-isolated-mongodb-with-docker">Run RESTHeart and network isolated MongoDB with Docker</a>
<ul class="sectlevel2">
<li><a href="#setup-procedure">Setup Procedure</a></li>
<li><a href="#stopping-the-containers">Stopping the Containers</a></li>
<li><a href="#restarting-the-containers">Restarting the Containers</a></li>
<li><a href="#how-to-connect-to-mongodb-with-mongosh">How to connect to MongoDB with mongosh</a></li>
</ul>
</li>
<li><a href="#for-development-run-restheart-and-open-mongodb-with-docker">For development: run RESTHeart and open MongoDB with Docker</a>
<ul class="sectlevel2">
<li><a href="#setup-procedure-2">Setup Procedure</a></li>
<li><a href="#stopping-the-containers-2">Stopping the Containers</a></li>
<li><a href="#restarting-the-containers-2">Restarting the Containers</a></li>
<li><a href="#run-restheart-with-custom-plugin">Run RESTHeart with custom plugin</a></li>
<li><a href="#run-restheart-with-remote-debugging">Run RESTHeart with remote debugging</a></li>
<li><a href="#how-to-connect-to-mongodb-with-mongosh-2">How to connect to MongoDB with mongosh</a></li>
<li><a href="#the-restheart-docker-tags">The RESTHeart Docker tags</a></li>
<li><a href="#dockerfile">Dockerfile</a></li>
<li><a href="#whats-next">What&#8217;s next</a></li>
</ul>
</li>
</ul>
        </div>
        <div class="col-12 col-md-9 col-xl-8 py-md-3 bd-content">
            <div class="docs-head d-flex align-items-center justify-content-between">
    <h2 class="d-flex align-items-center m-0 pr-3">
        <span>Setup with Docker</span>
    </h2>
</div>
            <div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If Docker isn’t your thing, check out the <a href="/docs/setup">setup</a> section for alternative installation methods.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="run-with-docker-compose">Run with docker compose</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This is the quickest way to run RESTHeart.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To run both RESTHeart and MongoDB services you can use <code>docker compose</code>. Just copy and paste the following shell command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>curl https://raw.githubusercontent.com/SoftInstigate/restheart/master/docker-compose.yml <span class="nt">--output</span> docker-compose.yml <span class="o">&amp;&amp;</span> docker compose up <span class="nt">--attach</span> restheart</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Watch <a href="https://www.youtube.com/watch?v=dzggm7Wp2fU&amp;t=206s">Docker / Docker Compose</a> video.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="run-restheart-with-docker-in-standalone-mode">Run RESTHeart with Docker in standalone mode</h3>
<div class="paragraph">
<p>When you run RESTHeart in standalone mode, it switches to a different default configuration that turns off all plugins that rely on MongoDB. This means you won&#8217;t have access to the handy built-in features that make RESTHeart so great. But don&#8217;t worry, you&#8217;ll still be able to play with it and add your own custom plugins.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">-p</span> 8080:8080 <span class="nt">-e</span> <span class="nv">RHO</span><span class="o">=</span><span class="s2">"/fileRealmAuthenticator/users[userid='admin']/password-&gt;'secret';/http-listener/host-&gt;'0.0.0.0'"</span> softinstigate/restheart <span class="nt">-s</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
the <code>RHO</code> environment variable sets the password for the user <code>admin</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="run-restheart-with-docker-mongodb-running-on-localhost">Run RESTHeart with Docker, MongoDB running on localhost</h3>
<div class="paragraph">
<p>This runs RESTHeart with Docker connecting to MongoDB running on the localhost.</p>
</div>
<div class="paragraph">
<p>If MongoDB is not already running, the following command will start a replica set and initiate it (the replica set is not required but enables RESTHeart to support transactions and change streams). Note that the data path is <code>/tmp/db</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> /tmp/db <span class="o">&amp;&amp;</span> mongod <span class="nt">--fork</span> <span class="nt">--syslog</span> <span class="nt">--replSet</span><span class="o">=</span>foo <span class="nt">-dbpath</span><span class="o">=</span>/tmp/db <span class="o">&amp;&amp;</span> mongosh <span class="nt">--quiet</span> <span class="nt">--eval</span> <span class="s1">'if (!rs.isMaster().ismaster) rs.initiate();'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Run RESTHeart with:</p>
</div>
<div class="paragraph text-muted">
<p>On OSX and Windows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">--rm</span> <span class="nt">-p</span> <span class="s2">"8080:8080"</span> softinstigate/restheart</code></pre>
</div>
</div>
<div class="paragraph text-muted">
<p>On Linux</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">--rm</span> <span class="nt">-p</span> <span class="s2">"8080:8080"</span> <span class="nt">--add-host</span> host.docker.internal:host-gateway softinstigate/restheart</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This command relies on the docker support of <code>host.docker.internal</code>. If you are using an old docker version or a docker runtime that does not support it, than you need to configure the docker network accordingly (you can refer to the brilliant <a href="https://stackoverflow.com/questions/24319662/from-inside-of-a-docker-container-how-do-i-connect-to-the-localhost-of-the-mach">"From inside of a Docker container, how do I connect to the localhost of the machine?" on StackOverflow</a>) or use one of the an alternative methods described in the further sections.
</td>
</tr>
</table>
</div>
</div>
<div class="sect1">
<h2 id="run-restheart-and-network-isolated-mongodb-with-docker">Run RESTHeart and network isolated MongoDB with Docker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This setup involves a RESTHeart container interfacing with a MongoDB container via a private Docker network. This arrangement ensures network isolation, with the RESTHeart API serving as the sole entry point. This configuration allows the two containers to communicate securely and efficiently within their dedicated network environment, while external access is streamlined and controlled through the RESTHeart API</p>
</div>
<div class="sect2">
<h3 id="setup-procedure">Setup Procedure</h3>
<div class="paragraph">
<p>This setup only needs to be completed once. Follow these steps:</p>
</div>
<div class="paragraph">
<p>1) <strong>Create a Docker Network</strong></p>
</div>
<div class="paragraph">
<p>Create a dedicated network for RESTHeart and MongoDB communication:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker network create restheart-network</code></pre>
</div>
</div>
<div class="paragraph">
<p>2) <strong>Start MongoDB Container</strong></p>
</div>
<div class="paragraph">
<p>Launch a MongoDB container within the created network:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">-d</span> <span class="nt">--name</span> mongodb <span class="nt">--network</span> restheart-network mongo <span class="nt">--replSet</span><span class="o">=</span>rs0</code></pre>
</div>
</div>
<div class="paragraph">
<p>3) <strong>Initialize MongoDB as a Single Node Replica Set</strong></p>
</div>
<div class="paragraph">
<p>Initialize the MongoDB instance to work as a single node replica set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">-it</span> <span class="nt">--network</span> restheart-network <span class="nt">--rm</span> mongo mongosh <span class="nt">--host</span> mongodb <span class="nt">--quiet</span> <span class="nt">--eval</span> <span class="s2">"rs.initiate()"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>4) <strong>Launch RESTHeart Container</strong></p>
</div>
<div class="paragraph">
<p>Run the RESTHeart container, linking it to the MongoDB container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">--name</span> restheart <span class="nt">--rm</span> <span class="nt">--network</span> restheart-network <span class="nt">-p</span> <span class="s2">"8080:8080"</span> <span class="nt">-e</span> <span class="nv">RHO</span><span class="o">=</span><span class="s1">'/http-listener/host-&gt;"0.0.0.0";/mclient/connection-string-&gt;"mongodb://mongodb"'</span> softinstigate/restheart</code></pre>
</div>
</div>
<div class="paragraph">
<p>5) <strong>Test the Setup</strong></p>
</div>
<div class="paragraph">
<p>Execute a test request to verify that RESTHeart is running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>http <span class="nt">-b</span> http://localhost:8080/ping
<span class="c"># Expected Output: Greetings from RESTHeart!</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="stopping-the-containers">Stopping the Containers</h3>
<div class="paragraph">
<p>To stop both RESTHeart and MongoDB containers, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker stop restheart mongodb</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="restarting-the-containers">Restarting the Containers</h3>
<div class="paragraph">
<p>The RESTHeart container is stateless and is removed upon stopping (due to the <code>--rm</code> option). However, the MongoDB container retains its state and is not removed on stop. To restart, use the following commands:</p>
</div>
<div class="paragraph">
<p>1) <strong>Start MongoDB Container</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker start mongodb</code></pre>
</div>
</div>
<div class="paragraph">
<p>2) <strong>Run RESTHeart Container</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">--name</span> restheart <span class="nt">--rm</span> <span class="nt">--network</span> restheart-network <span class="nt">-p</span> 8080:8080 <span class="nt">-e</span> <span class="nv">RHO</span><span class="o">=</span><span class="s1">'/http-listener/host-&gt;"0.0.0.0";/mclient/connection-string-&gt;"mongodb://mongodb"'</span> softinstigate/restheart</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="how-to-connect-to-mongodb-with-mongosh">How to connect to MongoDB with mongosh</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">-it</span> <span class="nt">--network</span> restheart-network <span class="nt">--rm</span> mongo mongosh <span class="nt">--host</span> mongodb</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="for-development-run-restheart-and-open-mongodb-with-docker">For development: run RESTHeart and open MongoDB with Docker</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
This setup is insecure and should be only used for developing or testing purposes.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="setup-procedure-2">Setup Procedure</h3>
<div class="paragraph">
<p>This setup only needs to be completed once. Follow these steps:</p>
</div>
<div class="paragraph">
<p>1) <strong>Start MongoDB Container</strong></p>
</div>
<div class="paragraph">
<p>Launch a MongoDB container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">-d</span> <span class="nt">--name</span> mongodb <span class="nt">-p</span> 27017:27017 mongo <span class="nt">--replSet</span><span class="o">=</span>rs0</code></pre>
</div>
</div>
<div class="paragraph">
<p>2) <strong>Initialize MongoDB as a Single Node Replica Set</strong></p>
</div>
<div class="paragraph">
<p>Initialize the MongoDB instance to work as a single node replica set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker <span class="nb">exec </span>mongodb mongosh <span class="nt">--quiet</span> <span class="nt">--eval</span> <span class="s2">"rs.initiate()"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>3) <strong>Launch RESTHeart Container</strong></p>
</div>
<div class="paragraph">
<p>Run the RESTHeart container, linking it to the MongoDB container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">--name</span> restheart <span class="nt">--rm</span> <span class="nt">-p</span> <span class="s2">"8080:8080"</span> softinstigate/restheart</code></pre>
</div>
</div>
<div class="paragraph">
<p>4) <strong>Test the Setup</strong></p>
</div>
<div class="paragraph">
<p>Execute a test request to verify that RESTHeart is running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>http <span class="nt">-b</span> http://localhost:8080/ping
<span class="c"># Expected Output: Greetings from RESTHeart!</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="stopping-the-containers-2">Stopping the Containers</h3>
<div class="paragraph">
<p>To stop both RESTHeart and MongoDB containers, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker stop restheart mongodb</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="restarting-the-containers-2">Restarting the Containers</h3>
<div class="paragraph">
<p>The RESTHeart container is stateless and is removed upon stopping (due to the <code>--rm</code> option). However, the MongoDB container retains its state and is not removed on stop. To restart, use the following commands:</p>
</div>
<div class="paragraph">
<p>1) <strong>Start MongoDB Container</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker start mongodb</code></pre>
</div>
</div>
<div class="paragraph">
<p>2) <strong>Run RESTHeart Container</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">--name</span> restheart <span class="nt">--rm</span> <span class="nt">-p</span> <span class="s2">"8080:8080"</span> softinstigate/restheart</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="run-restheart-with-custom-plugin">Run RESTHeart with custom plugin</h3>
<div class="paragraph">
<p>If the plugin jar file is in the directory <code>./target</code>, this command starts RESTHeart with the plugin integrated:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">--name</span> restheart <span class="nt">--rm</span> <span class="nt">-p</span> <span class="s2">"8080:8080"</span> <span class="nt">-v</span> ./target:/opt/restheart/plugins/custom softinstigate/restheart</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This command requires RESTHeart version equal or greater than 7.7.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="run-restheart-with-remote-debugging">Run RESTHeart with remote debugging</h3>
<div class="paragraph">
<p>This runs RESTHeart enabling remote debugging (port 4000).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker run <span class="nt">--rm</span> <span class="nt">-p</span> 8080:8080 <span class="nt">-p</span> 4000:4000 <span class="nt">--entrypoint</span> <span class="s2">"java"</span> softinstigate/restheart <span class="nt">-agentlib</span>:jdwp<span class="o">=</span><span class="nv">transport</span><span class="o">=</span>dt_socket,server<span class="o">=</span>y,suspend<span class="o">=</span>n,address<span class="o">=</span>0.0.0.0:4000 <span class="nt">-jar</span> restheart.jar</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="how-to-connect-to-mongodb-with-mongosh-2">How to connect to MongoDB with mongosh</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>docker <span class="nb">exec</span> <span class="nt">-it</span> mongodb mongosh</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-restheart-docker-tags">The RESTHeart Docker tags</h3>
<div class="paragraph">
<p>RESTHeart Docker images come in four different versions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Standard multi-arch (FROM eclipse-temurin)</p>
</li>
<li>
<p>Graalvm (FROM softinstigate/graalvm)</p>
</li>
<li>
<p>distroless (FROM gcr.io/distroless/java21-debian12)</p>
</li>
<li>
<p>native (FROM debian:12.6-slim)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These are example tags:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Example</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;version&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>latest</code>, <code>8</code>, <code>8.1</code>, <code>8.0.1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>The standard image.</strong>  This is usually the one you want to use. Keep in mind it doesn&#8217;t support running JavaScript plugins. <code>docker pull softinstigate/restheart:latest</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;version&gt;-distroless</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>latest-distroless</code>, <code>8-distroless</code>, <code>8.1-distroless</code>, <code>8.0.1-distroless</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similar to the standard image, this image contains only RESTHeart and its runtime dependencies. It does not contain a package manager, shells or any other programs you would expect to find in a standard Linux distribution. <code>docker pull softinstigate/restheart:latest-distroless</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;version&gt;-graalvm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>latest-graalvm</code>, <code>8-graalvm</code>, <code>8.1-graalvm</code>, <code>8.0.1-graalvm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RESTHeart running on the GraalVM that will let you JavaScript plugins. Check out the <a href="/docs/plugins/core-plugins-js">Plugins in JavaScript</a> for more info. This is the biggest image (about 600Mbytes). <code>docker pull softinstigate/restheart:latest-graalvm</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;version&gt;-native</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>latest-native</code>, <code>8-native</code>, <code>8.1-native</code>, <code>8.0.1-native</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RESTHeart built as a native binary. It is the smallest image with lightning-fast startup time. This is the perfect choice for deploying in a Kubernetes cluster. It can only execute JavaScript plugins. Check out <a href="/docs/plugins/deploy#deploy-java-plugins-on-restheart-native">Deploy Java plugins on RESTHeart Native</a> for more info. <code>docker pull softinstigate/restheart:latest-native</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="dockerfile">Dockerfile</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/SoftInstigate/restheart/blob/master/core/Dockerfile">Dockerfile</a></p>
</li>
<li>
<p><a href="https://github.com/SoftInstigate/restheart/blob/master/core/Dockerfile.distroless">Dockerfile.distroless</a></p>
</li>
<li>
<p><a href="https://github.com/SoftInstigate/restheart/blob/master/core/Dockerfile.graalvm">Dockerfile.graalvm</a></p>
</li>
<li>
<p><a href="https://github.com/SoftInstigate/restheart/blob/master/core/Dockerfile.native">Dockerfile.native</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The "distroless" images are for special deployment requirements, where having the smallest possible image size and the very minimal security attack surface is required and their tag contains a <code>distroless</code> label. You usually don&#8217;t need these images unless you exactly know what you are doing.</p>
</div>
<div class="paragraph">
<p>Images tags ending with <code>-native</code> are created with the <a href="https://www.graalvm.org/reference-manual/native-image/">GraalVM Native Image technology</a> starting from stable builds of the product, especially suited for high demanding environments, like Kubernetes. These are experimental and not fully documented yet, please contact us for questions.</p>
</div>
</div>
<div class="sect2">
<h3 id="whats-next">What&#8217;s next</h3>
<div class="ulist">
<ul>
<li>
<p>Check that RESTHeart is up and running, opening the URL <a href="http://localhost:8080/ping">http://localhost:8080/ping</a>, you should see the message: <code>Greetings from RESTHeart!</code></p>
</li>
<li>
<p>Check the <a href="/docs/configuration">Configuration</a> page</p>
</li>
<li>
<p>Play with the <a href="/docs/mongodb-rest/tutorial">REST API Tutorial</a></p>
</li>
<li>
<p>Play with the <a href="/docs/mongodb-graphql/tutorial">GraphQL API Tutorial</a></p>
</li>
<li>
<p>Deploy some plugins from the the <a href="https://github.com/SoftInstigate/restheart/tree/master/examples">plugin examples repo</a></p>
</li>
<li>
<p>Load the <a href="/docs/mongodb-rest/sample-data">sample data</a> into MongoDB and play with the Data API.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
        </div>
    </div>
</div>
    </div>

    <footer class="bs-docs-footer mt-0">
  <!-- <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + '://platform.twitter.com/widgets.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'twitter-wjs');</script> -->
  <div id="fb-root"></div>
  <section id="mainFooter">
    <div class="container-fluid">
      <div>
        <div class="bs-docs-social">
          <ul class="socialNetwork">
            <li class="ml-auto">
              <a href="https://twitter.com/softinstigate" class="tips" title="Follow us on Twitter" data-original-title="follow us on Twitter"
                target="_blank">
                <svg class="socialNetwork__icon"><use xlink:href="/images/sprite.svg#twitter" /></svg>
              </a>
            </li>
            <li>
              <a href="https://github.com/softinstigate/restheart" class="tips" title="Get the source code" data-original-title="get the source code"
                target="_blank">
                <svg class="socialNetwork__icon"><use xlink:href="/images/sprite.svg#github" /></svg>
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div>
        Made with
        <!--<span class="glyphicon glyphicon-heart"></span>-->
        <svg class="footer__like"><use xlink:href="/images/sprite.svg#like" /></svg>
        by
        <a href="https://www.softinstigate.com" target="_blank">SoftInstigate</a>
      </div>
      <div>
        <a href="https://softinstigate.com/en/privacy" class="mr-2 small">Privacy Policy</a>
        <a href="https://www.iubenda.com/privacy-policy/15571002/cookie-policy" class="small iubenda-nostyle no-brand iubenda-embed " title="Cookie Policy">Cookie Policy</a>
      </div>
    </section>
</footer>

    <!-- End Document ================================================== -->
</body>

</html>
<!-- add copy button on code snippet -->
<script src="/assets/js/clipboard.min.js"></script>
<style>
    .listingblock:hover .clipboard {
        display: block;
    }

    .clipboard {
        display: none;
        border: 0;
        font-size: .75em;
        text-transform: uppercase;
        font-weight: 800;
        padding: 2px;
        color: #999;
        position: absolute;
        top: 6px;
        right: 10px;
        background: transparent;
    }

    code + .clipboard {
        padding: 0;
    }

    .clipboard:hover, .clipboard:focus, .clipboard:active {
        outline: 0;
        color: white;
        /* background-color: #eee9e6; */
    }
</style>
<!-- add copy button on code snippet -->
<script>
    window.onload = function() {
        function target(b) {
            var p = b.parentNode;
            if (p.className.includes("highlight")) {
                var elems = p.getElementsByTagName("code");
                if (elems.length > 0) {
                    return elems[0];
                }
            }
            return p.childNodes[0];
        }

        var pre = document.getElementsByTagName('pre');
        for (var i = 0; i < pre.length; i++) {
            var b = document.createElement('button');
            b.className = 'clipboard';
            b.textContent = 'Copy';
            // b.innerHTML = '<i style="font-size:18px" class="icon-clipboard"></i>';
            if (pre[i].childNodes.length === 1 && pre[i].childNodes[0].nodeType === 3) {
                var div = document.createElement('div');
                div.textContent = pre[i].textContent;
                pre[i].textContent = '';
                pre[i].appendChild(div);
            }
            pre[i].appendChild(b);
        }

        var clipboard = new ClipboardJS('.clipboard', {
            // this custom text function, remove any line that doesn't start with $
            text: function (trigger) {
                var t = target(trigger);
                const text = target(trigger).outerText;

                if (text) {
                    const dataLang = t.getAttribute('data-lang');
                    if (dataLang === 'bash') {
                        return text
                            .replace(/^(?!\$.*$).*/gm, '') // remove lines that don't start with $
                            .replace(/^\$ */gm, '') // remove leading $
                            .replace(/^\s*[\r\n]/gm, '') // remove blank lines
                            .replace(/^\s+|\s+$/gm, ''); // trim string
                    }
                }
            },
            target: target
        });
        clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.textContent = 'Copied';
            setTimeout(function() {
                e.trigger.textContent = 'Copy';
            }, 2000);
        });
        clipboard.on('error', function(e) {
            console.error('Action:', e.action, e);
            console.error('Trigger:', e.trigger);
        });
    };
</script>