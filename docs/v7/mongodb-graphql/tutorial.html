<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->

<html lang="en">
<!--<![endif]-->
<head>
   <meta charset="utf-8">
   <title>RESTHeart - GraphQL API Tutorial with RESTHeart</title>
   <meta name="description" content="Low code API Framework for MongoDB">
   <meta name="author" content="SoftInstigate srl">
   <meta name="keywords" content="restheart,mongodb,rest,,graphql,api,http,microservice,java,framework">
   <!-- Open Graph -->
   <meta property="og:type" content="website">
   <meta property="og:url" content="https://restheart.org">
   <meta property="og:logo" content="/images/restheart logo.svg">
   <meta property="og:title" content="RESTHeart - GraphQL API Tutorial with RESTHeart">
   <meta property="og:description" content="Low code API Framework for MongoDB">
   <meta property="og:locale" content="en">
   
   <!-- avoid search engine indexing of old documentation pages  -->
   <meta name="robots" content="noindex,nofollow">
   
   <!-- Mobile Specific Metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <!-- icon fonts -->
   <script src="/js/fontawesome.com_c39cf060d4.js"></script>
   <link type="text/css" rel="stylesheet" href="/font-icons/custom-icons/css/custom-icons.css">
   <link type="text/css" rel="stylesheet" href="/font-icons/custom-icons/css/custom-icons-ie7.css">
   <!-- Custom css -->
   <link rel="stylesheet" type="text/css" href="/css/main.css">
   <!-- js ================================================== -->
   <script src="https://code.jquery.com/jquery.min.js"></script>
   <script src="/assets/js/bootstrap.bundle.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
   <script src="https://unpkg.com/@stackblitz/sdk/bundles/sdk.umd.js"></script>
   <script src="/js/carousel.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick.min.js"></script>
   <!-- Github buttons. -->
   <script async defer src="https://buttons.github.io/buttons.js"></script>
   <!--iframeResizer-->
  <script src="/assets/js/iframe-resizer.parent.js"></script>
   <!-- Favicons ================================================== -->
  <link rel="icon" type="image/svg+xml" href="/images/restheart logo.svg" />
  <link rel="shortcut icon" href="/images/favicon/favicon.png" />
  <link rel="canonical" href="https://restheart.org/docs/v7/mongodb-graphql/tutorial">
  <link rel="alternate" type="application/atom+xml" title="RESTHeart - API Framework" href="https://restheart.org/feed.xml" />
  <script defer data-domain="restheart.org" src="https://plausible.io/js/script.js"></script>
</head>


<body>
    <header id="mainHeader" class="fixed-top background-primary" role="banner">
    <div class="container-fluid">
        <nav class="navbar navbar-default scrollMenu navbar-expand-lg" role="navigation">
            <a class="navbar-brand" href="/">
                <h2 class="text-white"><strong>REST</strong>Heart</h2>
            </a>
            <!-- Place this tag where you want the button to render. -->
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target=".navbar-ex1-collapse"><span
                    class="sr-only">Toggle navigation</span> &#x2630;</button>
            <div class="collapse navbar-collapse navbar-ex1-collapse background-primary" id="scrollTarget">
                <ul class="nav navbar-nav ml-md-auto">
                    <!-- only bounce slack button on home page-->
                    
                    

                    <li class="nav-item ml-1 ml-lg-2 ml-xl-4 mb-0 pb-0 ">
                        <a class="github-button" href="https://github.com/SoftInstigate/restheart" data-size="large" data-show-count="true" aria-label="Star SoftInstigate/restheart on GitHub"></a>
                    </li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/sophia">Ask Sophia</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs">Docs</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/faq">FAQ</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/setup-with-docker/">GET</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/contact">Contacts</a></li>
                </ul>
            </div>
        </nav>
    </div>
</header>

<div class="alert alert-warning m-0 text-center" role="alert">
    <strong>RESTHeart 8 is the current stable release. Switch documentation to <a href="/docs">v8</a></strong>
</div>



<a  target="_blank" class="gitter-open-chat-button fixed-bottom-right" href="https://join.slack.com/t/restheart/shared_invite/zt-1olrhtoq8-5DdYLBWYDonFGEALhmgSXQ"></a>


    <div class="page-content">
        <div class="container-fluid imgHover doc">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
            <div class="bd-sidebar__head">
                <div class="dropdown d-flex justify-content-center w-100">
                    <button class="btn btn-secondary dropdown-toggle w-100 p-1 mb-2" type="button"
                        id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        v7
                    </button>
                    <div class="dropdown-menu mt-2 mr-1 pb-2" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="/docs">
                            
                            v8
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v7">
                            
                            <strong>v7</strong>
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v6">
                            
                            v6
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v5">
                            
                            v5
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v4">
                            
                            v4
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v3">
                            
                            v3
                            
                        </a>
                    </div>
                </div>
                <form action="https://www.google.com/search" class="form bd-sidebar__search d-flex" method="get"
                    name="searchform" target="_blank">
                    <input name="sitesearch" type="hidden" value="restheart.org/docs">
                    <input autocomplete="on" class="form-control input-sm search bd-sidebar__input" name="q"
                        placeholder="Search" required="required" type="text">
                    <button class="bd-sidebar__submit" type="submit">
                        <svg width="16" height="16">
                            <use xlink:href="/images/sprite.svg#search" /></svg>
                    </button>
                </form>
                <div class="d-flex flex-wrap justify-content-between align-items-center">
                    <a href="https://github.com/SoftInstigate/restheart-website/edit/master/docs/v7/mongodb-graphql/tutorial.adoc"
                        class="small mt-2 mb-1 ml-lg-auto"><i class="icon-pencil"></i>Edit Page</a>
                    <button class="btn btn-link bd-sidebar__toggle p-0 mb-1 d-md-none" type="button"
                        data-toggle="collapse" data-target="#bd-sidebar__menu" aria-controls="bd-sidebar__menu"
                        aria-expanded="false" aria-label="Toggle docs navigation">
                        Table of Contents
                        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 30 30" width="30" height="30"
                            focusable="false">
                            <title>Menu</title>
                            <path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22" />
                        </svg>
                    </button>
                </div>
            </div>

            <nav class="bd-sidebar__menu collapse d-md-block" id="bd-sidebar__menu">
                
                    
<a data-toggle="collapse" href="#overview" role="button" aria-expanded="false" aria-controls="collapseExample">
    <h2>Overview</h2>
</a>
<ul id="overview" class="collapse">
    <li><a href="/docs/v7">Overview</a></li>
    <li><a href="/docs/v7/faq">FAQ</a></li>
    <li><a href="/docs/v7/plugins/tutorial">Framework Tutorial</a></li>
    <li><a href="/docs/v7/mongodb-rest/tutorial">REST API Tutorial</a></li>
    <li><a href="/docs/v7/mongodb-graphql/tutorial">GraphQL API Tutorial</a></li>
    <li><a href="/docs/v7/security/tutorial">Auth^2 Tutorial</a></li>
    <li><a href="/docs/v7/example-webapps">Example Web Apps built with RESTHeart</a></li>
    <li><a href="/docs/v7/performances">Performances</a></li>
    <li><a href="/docs/v7/blog-posts">Blog posts</a></li>
    <li><a href="/docs/v7/video-tutorials">Video Tutorials</a></li>
    <li><a href="/docs/v7/upgrade-to-v7"><strong>Upgrade to v7</strong></a></li>
    <li><a href="https://github.com/SoftInstigate/restheart/discussions/425">Roadmap</a></li>
</ul>

<a data-toggle="collapse" href="#setup" role="button" aria-expanded="false" aria-controls="collapseExample">
    <h2 class="mt-2">Setup</h2>
</a>
<ul id="setup" class="collapse">
    <li><a href="/docs/v7/setup"><strong>Setup</strong></a></li>
    <li><a href="/docs/v7/setup-with-docker">Setup with Docker</a></li>
    <li><a href="/docs/v7/configuration">Configuration</a></li>
    <li><a href="/docs/v7/default-configuration">Default Configuration</a></li>
    <li><a href="/docs/v7/security/how-clients-authenticate">Client Authentication Howto</a></li>
    <li><a href="/docs/v7/security/user-management">User Management</a></li>
    <li><a href="/docs/v7/graalvm"><strong>GraalVM</strong></a></li>
    <li><a href="/docs/v7/security/security-hardening"><strong>Security Hardening</strong></a></li>
    <li><a href="/docs/v7/security/tls">Configure TLS</a></li>
    <li><a href="/docs/v7/security/secure-connection-to-mongodb">Secure connection to MongoDB</a></li>
    <li><a href="/docs/v7/proxy">Proxying requests</a></li>
    <li><a href="/docs/v7/static-resources">Serving static resources</a></li>
    <li><a href="/docs/v7/logging">Logging</a></li>
    <li><a href="/docs/v7/monitoring">Monitoring</a></li>
    <li><a href="/docs/v7/auditing">Auditing</a></li>
    <li><a href="/docs/v7/clustering">Clustering &amp; Load Balancing</a></li>
    <li><a href="/docs/v7/enterprise-license">Enterprise License</a></li>
</ul>

<a data-toggle="collapse" href="#framework" role="button" aria-expanded="false" aria-controls="collapseExample">
    <h2 class="mt-2">Framework</h2>
</a>
<ul id="framework" class="collapse">
    <!-- <li><a href="/docs/v7/plugins/dev-env">Development Environment</a></li> -->
    <li><a href="/docs/v7/plugins/overview">Overview</a></li>
    <li><a href="/docs/v7/plugins/tutorial">Tutorial</a></li>
    <li><a href="/docs/v7/plugins/deploy">How to deploy Plugins</a></li>
    <h3 id="rest-api" class="mt-2">Base Plugins</h2>
    <li><a href="/docs/v7/plugins/services">Services</a></li>
    <li><a href="/docs/v7/plugins/interceptors">Interceptors</a></li>
    <li><a href="/docs/v7/plugins/providers">Providers</a></li>
    <li><a href="/docs/v7/plugins/initializers">Initializers</a></li>
    <li><a href="/docs/v7/plugins/core-plugins-js">Services and Inteceptors in JavaScript</a></li>
    <h3 id="rest-api" class="mt-2">Security Plugins</h2>
    <li><a href="/docs/v7/security/overview">Overview</a></li>
    <li><a href="/docs/v7/plugins/authentication-mechanisms">Authentication Mechanisms</a></li>
    <li><a href="/docs/v7/plugins/authenticators">Authenticators</a></li>
    <li><a href="/docs/v7/plugins/authorizers">Authorizers</a></li>
    <li><a href="/docs/v7/plugins/token-managers">Token Managers</a></li>
</ul>

<a data-toggle="collapse" href="#security" role="button" aria-expanded="false" aria-controls="collapseExample">
    <h2 class="mt-2">Security Plugins</h2>
</a>
<ul id="security" class="collapse">
    <li><a href="/docs/v7/security/tutorial">Auth^2 Tutorial</a></li>
    <li><a href="/docs/v7/security/authentication">Authentication</a></li>
    <li><a href="/docs/v7/security/authorization">Authorization</a></li>
    <li><a href="/docs/v7/security/other-security-plugins">Other Security Plugins</a></li>
</ul>

<a  data-toggle="collapse" href="#mongodb" role="button" aria-expanded="false" aria-controls="collapseExample">
    <h2 class="mt-2">MongoDB Plugins</h2>
</a>
<ul id="mongodb" class="collapse">
    <h3 id="rest-api" class="mt-2">REST API</h2>
    <li><a href="/docs/v7/mongodb-rest/tutorial">Tutorial</a></li>
    <li><a href="/docs/v7/mongodb-rest/read-docs">Read Documents</a></li>
    <li><a href="/docs/v7/mongodb-rest/write-docs">Write Documents</a></li>
    <li><a href="/docs/v7/mongodb-rest/files">Binary Files with GridFS</a></li>
    <li><a href="/docs/v7/mongodb-rest/aggregations">Aggregations</a></li>
    <li><a href="/docs/v7/mongodb-rest/caching">Caching</a></li>
    <li><a href="/docs/v7/mongodb-rest/dbs-collections">Manage Dbs and Collections</a></li>
    <li><a href="/docs/v7/mongodb-rest/indexes">Indexes</a></li>
    <li><a href="/docs/v7/mongodb-rest/relationships">Relationships</a></li>
    <li><a href="/docs/v7/mongodb-rest/csv">Upload CSV files</a></li>
    <li><a href="/docs/v7/mongodb-rest/json-schema-validation">JSON Schema Validation</a></li>
    <li><a href="/docs/v7/mongodb-rest/transactions">Transactions</a></li>
    <li><a href="/docs/v7/mongodb-rest/resource-uri">Resource URIs</a></li>
    <li><a href="/docs/v7/mongodb-rest/representation-format">Representation Format</a></li>
    <li><a href="/docs/v7/mongodb-rest/sample-data">Load Sample Data into MongoDB</a></li>
    <li><a href="/docs/v7/mongodb-rest/etag">ETag</a></li>
    <li><a href="/docs/v7/mongodb-rest/shard-keys">Shard Keys</a></li>
    <li><a href="/docs/v7/mongodb-rest/monitoring">Monitoring</a></li>


    <h3 id="rest-api" class="mt-2">GraphQL API</h3>
    <li><a href="/docs/v7/mongodb-graphql/">Overview</a></li>
    <li><a href="/docs/v7/mongodb-graphql/tutorial">Tutorial</a></li>
    <li><a href="/docs/v7/mongodb-graphql/graphql-apps">GraphQL App Definition</a></li>
    <li><a href="/docs/v7/mongodb-graphql/optimization">Optimization</a></li>
    <li><a href="/docs/v7/mongodb-graphql/complex-app-example">A complex GraphQL App</a></li>

    <h3 id="rest-api" class="mt-2">Websocket API</h3>
    <li><a href="/docs/v7/mongodb-websocket/">Overview</a></li>
    <li><a href="/docs/v7/mongodb-websocket/change-streams">Streams definition</a></li>
    <li><a href="/docs/v7/mongodb-websocket/variables">Variables</a></li>
    <li><a href="/docs/v7/mongodb-websocket/examples">Examples</a></li>
</ul>

<style>
.collapsing {
    -webkit-transition: none;
    transition: none;
    display: none;
}
</style>

<script type="text/javascript">
    // on page load, show the menu element of the current pages
    const menu = 'mongodb';
    if (menu) {
        $(`#${menu}`).collapse('show');
    }
</script>
                
            </nav>
        </div>

        <div class="d-none d-xl-block col-xl-2 order-last bd-toc">
            <ul class="sectlevel2">
<li><a href="#create-the-star-wars-graphql-api">Create the Star Wars GraphQL API</a></li>
<li><a href="#execute-queries">Execute queries</a></li>
<li><a href="#understanding-the-graphql-app-definition">Understanding the GraphQL App Definition</a></li>
<li><a href="#the-full-graphql-schema">The full GraphQL Schema</a></li>
<li><a href="#the-full-graphql-app-definition">The full GraphQL APP definition</a></li>
</ul>
        </div>
        <div class="col-12 col-md-9 col-xl-8 py-md-3 bd-content">
            <div class="docs-head d-flex align-items-center justify-content-between">
    <h2 class="d-flex align-items-center m-0 pr-3">
        <span>GraphQL API Tutorial with RESTHeart</span>
    </h2>
</div>
            <div class="paragraph">
<p>This tutorial guides you through the process of implementing a GraphQL API using RESTHeart, following the structure and concepts presented in the <a href="https://graphql.org/learn/schema/#type-system">GraphQL.org tutorial</a>  on Star Wars characters and episodes, demonstrating the implementation using RESTHeart.</p>
</div>
<div class="paragraph">
<p>Dive into the world of GraphQL and RESTHeart, and may the force be with your data!</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
While this tutorial provides buttons for executing requests using "Rest Ninja," please be aware that it may not seamlessly function with Safari due to HTTPS requirements. For a smoother experience, we recommend using Chrome or Firefox browsers (refer to <a href="/docs/security/tls">Configure TLS</a>).
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="create-the-star-wars-graphql-api">Create the Star Wars GraphQL API</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
This tutorial requires RESTHeart v7.6.4+
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You won&#8217;t write a single line of code! The GraphQL API just requires to define a json configuration, known as GraphQL App Definition and store it in the special collection <code>/gql-apps</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>1 Start RESTHeart and MongoDB</strong></p>
</div>
<div class="paragraph">
<p>The following one-liner uses docker compose to start both RESTHeart and MongoDb. If you prefer not using docker, please refer to <a href="/docs/setup">setup</a> section to install RESTHeart and MongoDB.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>curl https://raw.githubusercontent.com/SoftInstigate/restheart/master/docker-compose.yml <span class="nt">--output</span> docker-compose.yml <span class="o">&amp;&amp;</span> docker compose up</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2 Create collections</strong></p>
</div>
<div class="paragraph">
<p>Create the <strong>star-wars-characters</strong> collection. This is where the data will be inserted.</p>
</div>
<div class="d-flex mt-2 mb-2">

    <span class="mr-3 text-muted"><strong>Request</strong></span>


    <a href="https://restninja.io/share/36f1499c310f74ec7092e47e488666c69abf45f5/0" class="btn btn-sm float-right" target="restninjatab">Execute with restninja</a>

</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="http"><span class="nf">PUT</span> <span class="nn">/star-wars-characters</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Create the <strong>gql-apps</strong> collection. This is where the GraphQL App definition will be inserted.</p>
</div>
<div class="d-flex mt-2 mb-2">

    <span class="mr-3 text-muted"><strong>Request</strong></span>


    <a href="https://restninja.io/share/cf0d3d9a0f811cf5d6921ad66fcf49cbad852a5a/0" class="btn btn-sm float-right" target="restninjatab">Execute with restninja</a>

</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="http"><span class="nf">PUT</span> <span class="nn">/gql-apps</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>3 Insert data</strong></p>
</div>
<div class="paragraph">
<p>Create documents in the <strong>star-wars-characters</strong> collection:</p>
</div>
<div class="d-flex mt-2 mb-2">

    <span class="mr-3 text-muted"><strong>Request</strong></span>


    <a href="https://restninja.io/share/1dd617582b894304fe3968dc2c97feff08c0adcb/1" class="btn btn-sm float-right" target="restninjatab">Execute with restninja</a>

</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="http"><span class="nf">POST</span> <span class="nn">/star-wars-characters?wm=upsert</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span></code></pre>
</div>
</div>
<div class="paragraph text-muted">
<p><strong>Request body</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="nl">"_id"</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Luke Skywalker"</span><span class="p">,</span><span class="nl">"friends"</span><span class="p">:[</span><span class="mi">1002</span><span class="p">,</span><span class="mi">1003</span><span class="p">,</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2001</span><span class="p">],</span><span class="nl">"appearsIn"</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nl">"homePlanet"</span><span class="p">:</span><span class="s2">"Tatooine"</span><span class="p">,</span><span class="nl">"heroOf"</span><span class="p">:</span><span class="mi">4</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="nl">"_id"</span><span class="p">:</span><span class="mi">1001</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Darth Vader"</span><span class="p">,</span><span class="nl">"friends"</span><span class="p">:[</span><span class="mi">1004</span><span class="p">],</span><span class="nl">"appearsIn"</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nl">"homePlanet"</span><span class="p">:</span><span class="s2">"Tatooine"</span><span class="p">,</span><span class="nl">"heroOf"</span><span class="p">:</span><span class="mi">5</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="nl">"_id"</span><span class="p">:</span><span class="mi">1002</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Han Solo"</span><span class="p">,</span><span class="nl">"friends"</span><span class="p">:[</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1003</span><span class="p">,</span><span class="mi">2001</span><span class="p">],</span><span class="nl">"appearsIn"</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nl">"homePlanet"</span><span class="p">:</span><span class="s2">"Corellia"</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="nl">"_id"</span><span class="p">:</span><span class="mi">1003</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Leia Organa"</span><span class="p">,</span><span class="nl">"friends"</span><span class="p">:[</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1002</span><span class="p">,</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2001</span><span class="p">],</span><span class="nl">"appearsIn"</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nl">"homePlanet"</span><span class="p">:</span><span class="s2">"Alderaan"</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="nl">"_id"</span><span class="p">:</span><span class="mi">1004</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Wilhuff Tarkin"</span><span class="p">,</span><span class="nl">"friends"</span><span class="p">:[</span><span class="mi">1001</span><span class="p">],</span><span class="nl">"appearsIn"</span><span class="p">:[</span><span class="mi">4</span><span class="p">],</span><span class="nl">"homePlanet"</span><span class="p">:</span><span class="s2">"Eriadu"</span><span class="p">},{</span><span class="nl">"_id"</span><span class="p">:</span><span class="mi">2000</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"C-3PO"</span><span class="p">,</span><span class="nl">"friends"</span><span class="p">:[</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1002</span><span class="p">,</span><span class="mi">1003</span><span class="p">,</span><span class="mi">2001</span><span class="p">],</span><span class="nl">"appearsIn"</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nl">"primaryFunction"</span><span class="p">:</span><span class="s2">"Protocol"</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="nl">"_id"</span><span class="p">:</span><span class="mi">2001</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"R2-D2"</span><span class="p">,</span><span class="nl">"friends"</span><span class="p">:[</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1002</span><span class="p">,</span><span class="mi">1003</span><span class="p">],</span><span class="nl">"appearsIn"</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nl">"primaryFunction"</span><span class="p">:</span><span class="s2">"Astromech"</span><span class="p">,</span><span class="nl">"heroOf"</span><span class="p">:</span><span class="mi">6</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="nl">"_id"</span><span class="p">:</span><span class="mi">3000</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"TIE Advanced x1"</span><span class="p">,</span><span class="nl">"length"</span><span class="p">:</span><span class="mf">9.2</span><span class="p">}</span><span class="w">
</span><span class="p">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>4 Insert the GraphQL App Definition</strong></p>
</div>
<div class="paragraph">
<p>To insert the GraphQL app definition, run the following:</p>
</div>
<div class="d-flex mt-2 mb-2">

    <span class="mr-3 text-muted"><strong>Request</strong></span>


    <a href="https://restninja.io/share/8d48b4efb6c042ea3ae6fff72823d42356494514/0" class="btn btn-sm float-right" target="restninjatab">Execute with restninja</a>

</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="http"><span class="nf">POST</span> <span class="nn">/gql-apps?wm=upsert</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Request body omitted because is quite long. Find it in the <a href="#the-full-graphql-app-definition">The full GraphQL APP definition</a> section.
</td>
</tr>
</table>
</div>
<div class="sidebarblock mt-4">
<div class="content">
<div class="title">That&#8217;s it</div>
<div class="paragraph text-center">
<p>The GraphQL API is ready to use!</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="execute-queries">Execute queries</h3>
<div class="sect3">
<h4 id="hero">hero</h4>
<div class="d-flex mt-2 mb-2">

    <span class="mr-3 text-muted"><strong>Request</strong></span>


    <a href="https://restninja.io/share/705cbffaa3daca184dde2958b15ffd5563faab46/0" class="btn btn-sm float-right" target="restninjatab">Execute with restninja</a>

</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="http"><span class="nf">POST</span> <span class="nn">/graphql/star-wars</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span></code></pre>
</div>
</div>
<div class="paragraph text-muted">
<p><strong>Request body</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="graphql"><span class="p">{</span><span class="w">
	</span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="n">JEDI</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">name</span><span class="w">
        </span><span class="n">friends</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">name</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="p">...</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">Droid</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">primaryFunction</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="p">...</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">Human</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">homePlanet</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="d-flex mt-2 mb-2">

    <span class="mr-3 text-muted"><strong>Response</strong></span>


</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"hero"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R2-D2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"friends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Luke Skywalker"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Han Solo"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Leia Organa"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"primaryFunction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Astromech"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Please note that the response content-type is <code>application/graphql-response+json</code>. It is treated as a binary format by RestNinja, which results in a less user-friendly display. To circumvent this issue and view the response more effectively, you can opt to use HTTPie, a command-line HTTP client:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{ hero(episode: JEDI) { name friends { name } ... on Droid { primaryFunction } ... on Human { homePlanet } } }'</span> | http <span class="nt">-a</span> admin:secret :8080/graphql/star-wars Content-Type:application/graphql</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="search">search</h4>
<div class="d-flex mt-2 mb-2">

    <span class="mr-3 text-muted"><strong>Request</strong></span>


    <a href="https://restninja.io/share/985a919c91ef4b62f895a9c7996bef40e04a85dc/0" class="btn btn-sm float-right" target="restninjatab">Execute with restninja</a>

</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="http"><span class="nf">POST</span> <span class="nn">/graphql/star-wars</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span></code></pre>
</div>
</div>
<div class="paragraph text-muted">
<p><strong>Request body</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="graphql"><span class="p">{</span><span class="w">
	</span><span class="n">search</span><span class="p">(</span><span class="n">text</span><span class="p">:</span><span class="w"> </span><span class="s2">"an"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="p">...</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">Character</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">name</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="p">...</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">Starship</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">name</span><span class="w">
            </span><span class="n">length</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="d-flex mt-2 mb-2">

    <span class="mr-3 text-muted"><strong>Response</strong></span>


</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"search"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Han Solo"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Leia Organa"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TIE Advanced x1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"length"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.2</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Please note that the response content-type is <code>application/graphql-response+json</code>. It is treated as a binary format by RestNinja, which results in a less user-friendly display. To circumvent this issue and view the response more effectively, you can opt to use HTTPie, a command-line HTTP client:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{ search(text: "an") { ... on Character { name } ... on Starship { name length } } }'</span> | http <span class="nt">-a</span> admin:secret :8080/graphql/star-wars Content-Type:application/graphql</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="understanding-the-graphql-app-definition">Understanding the GraphQL App Definition</h3>
<div class="paragraph">
<p>GraphQL types are connected to MongoDB data through mappings.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you don’t explicitly define a mapping for a field, RESTHeart will automatically map it to the MongoDB document field with the same name.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="enum-episode">enum Episode</h4>
<div class="paragraph">
<p>The GraphQL schema defines the enum <code>Episode</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="graphql"><span class="k">enum</span><span class="w"> </span><span class="n">Episode</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">NEWHOPE</span><span class="w"> </span><span class="n">EMPIRE</span><span class="w"> </span><span class="n">JEDI</span><span class="w"> </span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The enum type requires a mapping unless the value in the database is identical to the string representation of the enum value. If you look at the data, the episode are stored with Int codes. Thus we need a mapping to link the Int codes to the enum values.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
for more information on enum mappings see <a href="/docs/mongodb-graphql/graphql-apps#enum-mappings">Enum mappings</a>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"mappings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Episode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"NEWHOPE"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="nl">"EMPIRE"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="nl">"JEDI"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="union-searchresult">union SearchResult</h4>
<div class="paragraph">
<p>The GraphQL schema defines the union <code>SearchResult</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="graphql"><span class="k">union</span><span class="w"> </span><span class="n">SearchResult</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Human</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">Droid</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">Starship</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The union requires a <code>$typeResolver</code></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
for more information on union mappings see <a href="/docs/mongodb-graphql/graphql-apps#union-mappings">Union Mappings</a>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"mappings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"SearchResult"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"$typeResolver"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Human"</span><span class="p">:</span><span class="w"> </span><span class="s2">"field-exists(homePlanet)"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Droid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"field-exists(primaryFunction)"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Starship"</span><span class="p">:</span><span class="w"> </span><span class="s2">"field-exists(length)"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="interface-character">interface Character</h4>
<div class="paragraph">
<p>The GraphQL schema defines the interface <code>Character</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="graphql"><span class="k">interface</span><span class="w"> </span><span class="n">Character</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">_id</span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="p">!</span><span class="w">
  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
  </span><span class="n">friends</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">Character</span><span class="p">]!</span><span class="w">
  </span><span class="n">appearsIn</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">Episode</span><span class="p">]!</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The interface requires a <code>$typeResolver</code></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
for more information on interface mappings see <a href="/docs/mongodb-graphql/graphql-apps#interface-mappings">Interface Mappings</a>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"mappings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Character"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"$typeResolver"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Human"</span><span class="p">:</span><span class="w"> </span><span class="s2">"field-exists(homePlanet)"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Droid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"field-exists(primaryFunction)"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="object-starship">object Starship</h4>
<div class="paragraph">
<p>The GraphQL schema defines the object type <code>Starship</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="graphql"><span class="k">type</span><span class="w"> </span><span class="n">Starship</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">_id</span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="p">!</span><span class="w">
  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
  </span><span class="n">length</span><span class="p">(</span><span class="n">unit</span><span class="p">:</span><span class="w"> </span><span class="n">LengthUnit</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">METER</span><span class="p">):</span><span class="w"> </span><span class="nb">Float</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>No mapping is required since default field-to-field mappings are fine</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
for more information on field-to-field mappings see <a href="/docs/mongodb-graphql/graphql-apps#field-to-field-mapping">Field-to-field mapping</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="objects-human-and-droid">objects Human and Droid</h4>
<div class="paragraph">
<p>The GraphQL schema defines the object types <code>Human</code> and <code>Droids</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="graphql"><span class="k">type</span><span class="w"> </span><span class="n">Human</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="n">Character</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">_id</span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="p">!</span><span class="w">
  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
  </span><span class="n">friends</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">Character</span><span class="p">]!</span><span class="w">
  </span><span class="n">appearsIn</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">Episode</span><span class="p">]!</span><span class="w">
  </span><span class="n">homePlanet</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="k">type</span><span class="w"> </span><span class="n">Droid</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="n">Character</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">_id</span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="p">!</span><span class="w">
  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
  </span><span class="n">friends</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">Character</span><span class="p">]!</span><span class="w">
  </span><span class="n">appearsIn</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">Episode</span><span class="p">]!</span><span class="w">
  </span><span class="n">primaryFunction</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Those object types have the field <code>friends</code> in common, actually derived by the fact that they both implement the interface <code>Character</code>. This field requires a field-to-query mapping.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
for more information on field-to-query mappings see <a href="/docs/mongodb-graphql/graphql-apps#field-to-query-mapping">Field-to-query Mapping</a>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
for more information on the <code>$fk</code> operator see <a href="/docs/mongodb-graphql/graphql-apps#mappings-operators">Mapping Operators</a>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"mappings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Human"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"friends"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="s2">"restheart"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"star-wars-characters"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"find"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$in"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$fk"</span><span class="p">:</span><span class="w"> </span><span class="s2">"friends"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"Droid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"friends"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="s2">"restheart"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"star-wars-characters"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"find"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$in"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$fk"</span><span class="p">:</span><span class="w"> </span><span class="s2">"friends"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="query">Query</h4>
<div class="paragraph">
<p>The GraphQL schema defines the queries <code>hero</code> and <code>search</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="graphql"><span class="k">type</span><span class="w"> </span><span class="n">Query</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="n">Episode</span><span class="p">!):</span><span class="w"> </span><span class="n">Character</span><span class="w">
  </span><span class="n">search</span><span class="p">(</span><span class="n">text</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!):</span><span class="w"> </span><span class="p">[</span><span class="n">SearchResult</span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Queries always require mappings.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
for more information on query mappings see <a href="/docs/mongodb-graphql/graphql-apps#field-to-query-mapping">Field-to-query Mapping</a>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"mappings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"hero"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="s2">"restheart"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"star-wars-characters"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"find"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"heroOf"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$arg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"episode"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"search"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="s2">"restheart"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"star-wars-characters"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"find"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$regex"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$arg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="nl">"$options"</span><span class="p">:</span><span class="w"> </span><span class="s2">"i"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-full-graphql-schema">The full GraphQL Schema</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="graphql"><span class="k">union</span><span class="w"> </span><span class="n">SearchResult</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Human</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">Droid</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">Starship</span><span class="w">

</span><span class="k">enum</span><span class="w"> </span><span class="n">LengthUnit</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">METER</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="k">enum</span><span class="w"> </span><span class="n">Episode</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">NEWHOPE</span><span class="w">
  </span><span class="n">EMPIRE</span><span class="w">
  </span><span class="n">JEDI</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="k">type</span><span class="w"> </span><span class="n">Starship</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">_id</span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="p">!</span><span class="w">
  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
  </span><span class="n">length</span><span class="p">(</span><span class="n">unit</span><span class="p">:</span><span class="w"> </span><span class="n">LengthUnit</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">METER</span><span class="p">):</span><span class="w"> </span><span class="nb">Float</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="k">interface</span><span class="w"> </span><span class="n">Character</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">_id</span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="p">!</span><span class="w">
  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
  </span><span class="n">friends</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">Character</span><span class="p">]!</span><span class="w">
  </span><span class="n">appearsIn</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">Episode</span><span class="p">]!</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="k">type</span><span class="w"> </span><span class="n">Human</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="n">Character</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">_id</span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="p">!</span><span class="w">
  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
  </span><span class="n">friends</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">Character</span><span class="p">]!</span><span class="w">
  </span><span class="n">appearsIn</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">Episode</span><span class="p">]!</span><span class="w">
  </span><span class="n">homePlanet</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="k">type</span><span class="w"> </span><span class="n">Droid</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="n">Character</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">_id</span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="p">!</span><span class="w">
  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
  </span><span class="n">friends</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">Character</span><span class="p">]!</span><span class="w">
  </span><span class="n">appearsIn</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">Episode</span><span class="p">]!</span><span class="w">
  </span><span class="n">primaryFunction</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="k">type</span><span class="w"> </span><span class="n">Query</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="n">Episode</span><span class="p">!):</span><span class="w"> </span><span class="n">Character</span><span class="w">
  </span><span class="n">search</span><span class="p">(</span><span class="n">text</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!):</span><span class="w"> </span><span class="p">[</span><span class="n">SearchResult</span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-full-graphql-app-definition">The full GraphQL APP definition</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"star-wars"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descriptor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"star-wars"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GraphQL application used in the Star Wars Tutorial"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"star-wars"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"union SearchResult = Human | Droid | Starship enum LengthUnit { METER } enum Episode { NEWHOPE EMPIRE JEDI } type Starship { _id: Int! name: String!  length(unit: LengthUnit = METER): Float } interface Character { _id: Int! name: String! friends: [Character]! appearsIn: [Episode]! } type Human implements Character { _id: Int! name: String! friends: [Character]! appearsIn: [Episode]! homePlanet: String! } type Droid implements Character { _id: Int! name: String! friends: [Character]! appearsIn: [Episode]! primaryFunction: String! } type Query { hero(episode: Episode!): Character search(text: String!): [SearchResult] }"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mappings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Episode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"NEWHOPE"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="nl">"EMPIRE"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="nl">"JEDI"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="nl">"SearchResult"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"$typeResolver"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Human"</span><span class="p">:</span><span class="w"> </span><span class="s2">"field-exists(homePlanet)"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Droid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"field-exists(primaryFunction)"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Starship"</span><span class="p">:</span><span class="w"> </span><span class="s2">"field-exists(length)"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"Character"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"$typeResolver"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Human"</span><span class="p">:</span><span class="w"> </span><span class="s2">"field-exists(homePlanet)"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Droid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"field-exists(primaryFunction)"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"Human"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"friends"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="s2">"restheart"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"star-wars-characters"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"find"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$in"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$fk"</span><span class="p">:</span><span class="w"> </span><span class="s2">"friends"</span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"Droid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"friends"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="s2">"restheart"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"star-wars-characters"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"find"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$in"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$fk"</span><span class="p">:</span><span class="w"> </span><span class="s2">"friends"</span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"Query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"hero"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="s2">"restheart"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"star-wars-characters"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"find"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"heroOf"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$arg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"episode"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"search"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="s2">"restheart"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"star-wars-characters"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"find"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$regex"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"$arg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="nl">"$options"</span><span class="p">:</span><span class="w"> </span><span class="s2">"i"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
        </div>
    </div>
</div>
    </div>

    <footer class="bs-docs-footer mt-0">
  <!-- <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + '://platform.twitter.com/widgets.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'twitter-wjs');</script> -->
  <div id="fb-root"></div>
  <section id="mainFooter">
    <div class="container-fluid">
      <div>
        <div class="bs-docs-social">
          <ul class="socialNetwork">
            <li class="ml-auto">
              <a href="https://twitter.com/softinstigate" class="tips" title="Follow us on Twitter" data-original-title="follow us on Twitter"
                target="_blank">
                <svg class="socialNetwork__icon"><use xlink:href="/images/sprite.svg#twitter" /></svg>
              </a>
            </li>
            <li>
              <a href="https://github.com/softinstigate/restheart" class="tips" title="Get the source code" data-original-title="get the source code"
                target="_blank">
                <svg class="socialNetwork__icon"><use xlink:href="/images/sprite.svg#github" /></svg>
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div>
        Made with
        <!--<span class="glyphicon glyphicon-heart"></span>-->
        <svg class="footer__like"><use xlink:href="/images/sprite.svg#like" /></svg>
        by
        <a href="https://www.softinstigate.com" target="_blank">SoftInstigate</a>
      </div>
      <div>
        <a href="https://softinstigate.com/en/privacy" class="mr-2 small">Privacy Policy</a>
        <a href="https://www.iubenda.com/privacy-policy/15571002/cookie-policy" class="small iubenda-nostyle no-brand iubenda-embed " title="Cookie Policy">Cookie Policy</a>
      </div>
    </section>
</footer>

    <!-- End Document ================================================== -->
</body>

</html>
<!-- add copy button on code snippet -->
<script src="/assets/js/clipboard.min.js"></script>
<style>
    .listingblock:hover .clipboard {
        display: block;
    }

    .clipboard {
        display: none;
        border: 0;
        font-size: .75em;
        text-transform: uppercase;
        font-weight: 800;
        padding: 2px;
        color: #999;
        position: absolute;
        top: 6px;
        right: 10px;
        background: transparent;
    }

    code + .clipboard {
        padding: 0;
    }

    .clipboard:hover, .clipboard:focus, .clipboard:active {
        outline: 0;
        color: white;
        /* background-color: #eee9e6; */
    }
</style>
<!-- add copy button on code snippet -->
<script>
    window.onload = function() {
        function target(b) {
            var p = b.parentNode;
            if (p.className.includes("highlight")) {
                var elems = p.getElementsByTagName("code");
                if (elems.length > 0) {
                    return elems[0];
                }
            }
            return p.childNodes[0];
        }

        var pre = document.getElementsByTagName('pre');
        for (var i = 0; i < pre.length; i++) {
            var b = document.createElement('button');
            b.className = 'clipboard';
            b.textContent = 'Copy';
            // b.innerHTML = '<i style="font-size:18px" class="icon-clipboard"></i>';
            if (pre[i].childNodes.length === 1 && pre[i].childNodes[0].nodeType === 3) {
                var div = document.createElement('div');
                div.textContent = pre[i].textContent;
                pre[i].textContent = '';
                pre[i].appendChild(div);
            }
            pre[i].appendChild(b);
        }

        var clipboard = new ClipboardJS('.clipboard', {
            // this custom text function, remove any line that doesn't start with $
            text: function (trigger) {
                var t = target(trigger);
                const text = target(trigger).outerText;

                if (text) {
                    const dataLang = t.getAttribute('data-lang');
                    if (dataLang === 'bash') {
                        return text
                            .replace(/^(?!\$.*$).*/gm, '') // remove lines that don't start with $
                            .replace(/^\$ */gm, '') // remove leading $
                            .replace(/^\s*[\r\n]/gm, '') // remove blank lines
                            .replace(/^\s+|\s+$/gm, ''); // trim string
                    }
                }
            },
            target: target
        });
        clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.textContent = 'Copied';
            setTimeout(function() {
                e.trigger.textContent = 'Copy';
            }, 2000);
        });
        clipboard.on('error', function(e) {
            console.error('Action:', e.action, e);
            console.error('Trigger:', e.trigger);
        });
    };
</script>