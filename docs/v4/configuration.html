<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->

<html lang="en">
<!--<![endif]-->
<head>
   <meta charset="utf-8">
   <title>RESTHeart - Configuration</title>
   <meta name="description" content="Low code API Framework for MongoDB">
   <meta name="author" content="SoftInstigate srl">
   <meta name="keywords" content="restheart,mongodb,rest,,graphql,api,http,microservice,java,framework">
   <!-- Open Graph -->
   <meta property="og:type" content="website">
   <meta property="og:url" content="https://restheart.org">
   <meta property="og:logo" content="/images/restheart logo.svg">
   <meta property="og:title" content="RESTHeart - Configuration">
   <meta property="og:description" content="Low code API Framework for MongoDB">
   <meta property="og:locale" content="en">
   
   <!-- avoid search engine indexing of old documentation pages  -->
   <meta name="robots" content="noindex,nofollow">
   
   <!-- Mobile Specific Metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <!-- icon fonts -->
   <script src="/js/fontawesome.com_c39cf060d4.js"></script>
   <link type="text/css" rel="stylesheet" href="/font-icons/custom-icons/css/custom-icons.css">
   <link type="text/css" rel="stylesheet" href="/font-icons/custom-icons/css/custom-icons-ie7.css">
   <!-- Custom css -->
   <link rel="stylesheet" type="text/css" href="/css/main.css">
   <!-- js ================================================== -->
   <script src="https://code.jquery.com/jquery.min.js"></script>
   <script src="/assets/js/bootstrap.bundle.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
   <script src="https://unpkg.com/@stackblitz/sdk/bundles/sdk.umd.js"></script>
   <script src="/js/carousel.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick.min.js"></script>
   <!-- Github buttons. -->
   <script async defer src="https://buttons.github.io/buttons.js"></script>
   <!--iframeResizer-->
  <script src="/assets/js/iframe-resizer.parent.js"></script>
   <!-- Favicons ================================================== -->
  <link rel="icon" type="image/svg+xml" href="/images/restheart logo.svg" />
  <link rel="shortcut icon" href="/images/favicon/favicon.png" />
  <link rel="canonical" href="https://restheart.org/docs/v4/configuration">
  <link rel="alternate" type="application/atom+xml" title="RESTHeart - API Framework" href="https://restheart.org/feed.xml" />
  <script defer data-domain="restheart.org" src="https://plausible.io/js/script.js"></script>
</head>


<body>
    <header id="mainHeader" class="fixed-top background-primary" role="banner">
    <div class="container-fluid">
        <nav class="navbar navbar-default scrollMenu navbar-expand-lg" role="navigation">
            <a class="navbar-brand" href="/">
                <h2 class="text-white"><strong>REST</strong>Heart</h2>
            </a>
            <!-- Place this tag where you want the button to render. -->
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target=".navbar-ex1-collapse"><span
                    class="sr-only">Toggle navigation</span> &#x2630;</button>
            <div class="collapse navbar-collapse navbar-ex1-collapse background-primary" id="scrollTarget">
                <ul class="nav navbar-nav ml-md-auto">
                    <!-- only bounce slack button on home page-->
                    
                    

                    <li class="nav-item ml-1 ml-lg-2 ml-xl-4 mb-0 pb-0 ">
                        <a class="github-button" href="https://github.com/SoftInstigate/restheart" data-size="large" data-show-count="true" aria-label="Star SoftInstigate/restheart on GitHub"></a>
                    </li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/sophia">Ask Sophia</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs">Docs</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/faq">FAQ</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/setup-with-docker/">GET</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/contact">Contacts</a></li>
                </ul>
            </div>
        </nav>
    </div>
</header>

<div class="alert alert-warning m-0 text-center" role="alert">
    <strong>RESTHeart 8 is the current stable release. Switch documentation to <a href="/docs">v8</a></strong>
</div>



<a  target="_blank" class="gitter-open-chat-button fixed-bottom-right" href="https://join.slack.com/t/restheart/shared_invite/zt-1olrhtoq8-5DdYLBWYDonFGEALhmgSXQ"></a>


    <div class="page-content">
        <div class="container-fluid imgHover doc">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
            <div class="bd-sidebar__head">
                <div class="dropdown d-flex justify-content-center w-100">
                    <button class="btn btn-secondary dropdown-toggle w-100 p-1 mb-2" type="button"
                        id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        v4
                    </button>
                    <div class="dropdown-menu mt-2 mr-1 pb-2" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="/docs">
                            
                            v8
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v7">
                            
                            v7
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v6">
                            
                            v6
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v5">
                            
                            v5
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v4">
                            
                            <strong>v4</strong>
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v3">
                            
                            v3
                            
                        </a>
                    </div>
                </div>
                <form action="https://www.google.com/search" class="form bd-sidebar__search d-flex" method="get"
                    name="searchform" target="_blank">
                    <input name="sitesearch" type="hidden" value="restheart.org/docs">
                    <input autocomplete="on" class="form-control input-sm search bd-sidebar__input" name="q"
                        placeholder="Search" required="required" type="text">
                    <button class="bd-sidebar__submit" type="submit">
                        <svg width="16" height="16">
                            <use xlink:href="/images/sprite.svg#search" /></svg>
                    </button>
                </form>
                <div class="d-flex flex-wrap justify-content-between align-items-center">
                    <a href="https://github.com/SoftInstigate/restheart-website/edit/master/docs/v4/configuration.md"
                        class="small mt-2 mb-1 ml-lg-auto"><i class="icon-pencil"></i>Edit Page</a>
                    <button class="btn btn-link bd-sidebar__toggle navbar-expand-md p-0 mb-1 d-md-none" type="button"
                        data-toggle="collapse" data-target="#bd-sidebar__menu" aria-controls="bd-sidebar__menu"
                        aria-expanded="false" aria-label="Toggle docs navigation">
                        Table of Contents
                        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 30 30" width="30" height="30"
                            focusable="false">
                            <title>Menu</title>
                            <path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10"
                                d="M4 7h22M4 15h22M4 23h22" />
                        </svg>
                    </button>
                </div>
            </div>

            <div class="bd-sidebar__menu collapse d-md-block" id="bd-sidebar__menu">
                
                    <h2 id="getting-started"><a href="/docs">Intoduction</a></h2>

<h2 id="getting-started">Getting Started</h2>
<ul>
    <li><a href="/docs/v4/setup">Setup</a></li>
    <li><a href="/docs/v4/configuration">Configuration</a></li>
    <li><a href="/docs/v4/tutorial">Absolute Beginner Tutorial</a></li>
    <li><a href="/docs/v4/quick-reference">Quick Reference</a></li>
    <li><a href="/docs/v4/resource-uri">Resource URIs</a></li>
    <li><a href="/docs/v4/representation-format">Representation Format</a></li>
    <li><a href="/docs/v4/blog-posts">Tutorials</a></li>
    <li><a href="/docs/v4/performances">Performances</a></li>
    <li><a href="/docs/v4/clustering">Clustering & Load Balancing</a></li>
</ul>

<h2 id="upgrading-from-3"><a href="/docs/v4/upgrade-to-v4">Upgrade to v4</a></h2>
<h2 id="upgrading-from-3"><a href="/docs/v4/roadmap">Roadmap</a></h2>

<h2 id="content-api">Content API</h2>
<ul>
    <li><a href="/docs/v4/read-docs">Read JSON Documents</a></li>
    <li><a href="/docs/v4/write-docs">Write JSON Documents</a></li>
    <li><a href="/docs/v4/files">Binary Files with GridFS</a></li>
    <li><a href="/docs/v4/aggregations">Aggregations</a></li>
    <li><a href="/docs/v4/csv">Upload CSV files</a></li>
    <li><a href="/docs/v4/json-schema-validation">JSON Schema Validation</a></li>
    <li><a href="/docs/v4/change-streams">Change Streams</a></li>
    <li><a href="/docs/v4/transactions">Transactions</a></li>
</ul>

<h2 id="mgmt-api">Management API</h2>
<ul>
    <li><a href="/docs/v4/mgmt/dbs-collections">Databases and Collections</a></li>
    <li><a href="/docs/v4/mgmt/indexes">Indexes</a></li>
    <li><a href="/docs/v4/mgmt/relationships">Relationships</a></li>
</ul>

<h2 id="security">Securing Requests</h2>
<ul>
    <li><a href="/docs/v4/security/overview">Overview</a></li>
    <li><a href="/docs/v4/security/authentication">Authentication</a></li>
    <li><a href="/docs/v4/security/authorization">Authorization</a></li>
    <li><a href="/docs/v4/security/user-management">User Management</a></li>
    <li><a href="/docs/v4/security/tls">Configure TLS</a></li>
    <li><a href="/docs/v4/security/secure-connection-to-mongodb">Secure connection to MongoDB</a></li>
    <li><a href="/docs/v4/security/how-clients-authenticate">How Clients Authenticate</a></li>
</ul>


<h2 id="plugins">Plugins</h2>
<ul>
    <li><a href="/docs/v4/plugins/overview">Overview</a></li>
    <li><a href="/docs/v4/plugins/apply">Apply plugins</a></li>
    <li><a href="/docs/v4/plugins/list">Available plugins</a></li>
</ul>

<h2 id="develop-core-plugins">Develop Plugins</h2>
<ul>
    <li><a href="/docs/v4/develop/core-plugins">Core Plugins</a></li>
    <li><a href="/docs/v4/develop/security-plugins">Security Plugins</a></li>
    <li><a href="/docs/v4/develop/packaging">Packaging Plugins</a></li>
    <li><a href="/docs/v4/develop/best-practices">Best practices</a></li>
</ul>

<h2 id="other-fatures">Other Features</h2>
<ul class="mb-5">
    <li><a href="/docs/v4/etag">ETag</a></li>
    <li><a href="/docs/v4/cors-support">CORS Support</a></li>
    <li><a href="/docs/v4/shard-keys">Shard Keys</a></li>
    <li><a href="/docs/v4/speedup-requests-with-cursor-pools">Cursor Pools</a></li>
    <li><a href="/docs/v4/monitoring">Monitoring</a></li>
    <li><a href="/docs/v4/auditing">Auditing</a></li>
</ul>

                
            </div>
        </div>
        <div class="d-none d-xl-block col-xl-2 order-last bd-toc">

  <ul>
    <li><a href="#configuration-files">Configuration files</a></li>
    <li><a href="#updating-configuration-in-docker-containers">Updating configuration in Docker containers</a></li>
    <li>
      <p><a href="#important-configuration-options">Important configuration options</a></p>
    </li>
    <li><a href="#parametric-configuration">Parametric configuration</a>
      <ul>
        <li><a href="#environment-variables">Environment variables</a></li>
        <li><a href="#command-line-parameters">Command line parameters</a></li>
      </ul>
    </li>
  </ul>

</div>

<div class="col-12 col-md-9 col-xl-8 py-md-3 bd-content">

  <div class="docs-head d-flex align-items-center justify-content-between">
    <h2 class="d-flex align-items-center m-0 pr-3">
        <span>Configuration</span>
    </h2>
</div>

  <h2 id="configuration-files">Configuration files</h2>

  <p class="bs-callout bs-callout-info">Specifying the configuration files is optional; without them the processes run with the default configuration.</p>

  <p><code class="language-plaintext highlighter-rouge">restheart-platform-core</code> and <code class="language-plaintext highlighter-rouge">restheart-platform-security</code> are configured via configuration and properties files. Configuration files can be parametric and merged with a set of properties to get the final values.</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>java <span class="nt">-jar</span> restheart-platform-core.jar &lt;configuration-file&gt; <span class="nt">-e</span> &lt;properties-file&gt;
<span class="nv">$ </span>java <span class="nt">-jar</span> restheart-platform-security.jar &lt;configuration-file&gt; <span class="nt">-e</span> &lt;properties-file&gt;
</code></pre></div>  </div>

  <p class="bs-callout bs-callout-warning"><strong>Note</strong>: properties files for <code class="language-plaintext highlighter-rouge">restheart-platform-security</code> are available starting from Platform release 4.1.</p>

  <p>It’s also possible to pass both the <code class="language-plaintext highlighter-rouge">restheart-platform-core</code>’s environment properties and configuration file respectively via the <code class="language-plaintext highlighter-rouge">RESTHEART_ENVFILE</code> and <code class="language-plaintext highlighter-rouge">RESTHEART_CONFFILE</code> environment variables or Java properties, for example:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">export </span><span class="nv">RESTHEART_ENVFILE</span><span class="o">=</span>etc/restheart-platform-core.yml
<span class="nv">$ </span><span class="nb">export </span><span class="nv">RESTHEART_CONFFILE</span><span class="o">=</span>etc/core.properties
</code></pre></div>  </div>

  <p>For RESTHeart Security use the equivalent <code class="language-plaintext highlighter-rouge">RESTHEART_SECURITY_CONFFILE</code> environment variable or Java property.</p>

  <p>The RESTHeart Platform the configuration files are under the <code class="language-plaintext highlighter-rouge">etc/</code> folder.</p>

  <p><strong>Core configuration</strong></p>

  <table class="table">
    <thead>
      <tr>
        <th>file</th>
        <th>description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">etc/restheart-platform-core.yml</code></td>
        <td>parametric configuration file</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">etc/core.properties</code></td>
        <td>default parameters values</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">etc/core-standalone.properties</code></td>
        <td>run restheart-platform-core without restheart-platform-security</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">etc/core-bwcv3.properties</code></td>
        <td>run restheart-platform-core in backward compatibility mode</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">etc/core-docker.properties</code></td>
        <td>used by the Docker container</td>
      </tr>
    </tbody>
  </table>

  <p><strong>Security configuration</strong></p>

  <table class="table">
    <thead>
      <tr>
        <th>file</th>
        <th>description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">etc/restheart-platform-security.yml</code></td>
        <td>parametric configuration file</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">etc/security.properties</code></td>
        <td>default parameters values</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">etc/security-docker.properties</code></td>
        <td>used by the Docker container</td>
      </tr>
    </tbody>
  </table>

  <p class="bs-callout bs-callout-info">The configuration files are documented in details with inline comments.</p>

  <p class="bs-callout bs-callout-info">Be aware that before 4.1.10 the properties files have a slightly different names (e.g. <code class="language-plaintext highlighter-rouge">etc/core-bwcv3.properties</code> was called <code class="language-plaintext highlighter-rouge">etc/bwcv3.properties</code>).</p>

  <h2 id="updating-configuration-in-docker-containers">Updating configuration in Docker containers</h2>

  <p>The configuration files used by the Docker containers are:</p>

  <ul>
    <li><code class="language-plaintext highlighter-rouge">etc/restheart-platform-core.yml</code></li>
    <li><code class="language-plaintext highlighter-rouge">etc/restheart-platform-security.yml</code></li>
  </ul>

  <p>The properties files used by the Docker containers are:</p>

  <ul>
    <li><code class="language-plaintext highlighter-rouge">etc/core-docker.properties</code></li>
    <li><code class="language-plaintext highlighter-rouge">etc/security-docker.properties</code></li>
  </ul>

  <p><strong>Important</strong> if a configuration or property file is modified, the containers must be rebuilt for changes to take effect:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-compose up <span class="nt">--build</span>
</code></pre></div>  </div>

  <h2 id="important-configuration-options">Important configuration options</h2>

  <p>The following tables highlights the most important configuration options.</p>

  <h3 id="core">Core</h3>

  <p>All the important configuration options of <code class="language-plaintext highlighter-rouge">resthart-platform-core</code> are defined in the properties file.</p>

  <table class="table">
    <thead>
      <tr>
        <th>property</th>
        <th>default</th>
        <th>description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><em>Listeners section</em></td>
        <td>ajp at <code class="language-plaintext highlighter-rouge">localhost:8009</code></td>
        <td>listeners allow to specify the protocol, ip, port and to use</td>
      </tr>
      <tr>
        <td>instance-name</td>
        <td>default</td>
        <td>name of this instance of <code class="language-plaintext highlighter-rouge">resthart-platform-core</code></td>
      </tr>
      <tr>
        <td>default-representation-format</td>
        <td>STANDARD</td>
        <td><a href="/docs/v4/representation-format">representation format</a> to use in case the <code class="language-plaintext highlighter-rouge">rep</code> query parameters is not specified</td>
      </tr>
      <tr>
        <td>mongo-uri</td>
        <td>mongodb://127.0.0.1</td>
        <td>the <a href="https://docs.mongodb.com/manual/reference/connection-string/" target="_blank">MongoDB connection string</a></td>
      </tr>
      <tr>
        <td>root-mongo-resource</td>
        <td>/restheart</td>
        <td>MongoDB resource to bind to the root URI <code class="language-plaintext highlighter-rouge">/</code></td>
      </tr>
      <tr>
        <td>log-level</td>
        <td>DEBUG</td>
        <td>log level</td>
      </tr>
      <tr>
        <td>query-time-limit</td>
        <td>0 (no limit)</td>
        <td>kill request with slow queries</td>
      </tr>
      <tr>
        <td>aggregation-time-limit</td>
        <td>0 (no limit)</td>
        <td>kill slow aggregations requests</td>
      </tr>
      <tr>
        <td>io-threads</td>
        <td>4</td>
        <td>number of io thread, suggested value: core*2</td>
      </tr>
      <tr>
        <td>worker-threads</td>
        <td>16</td>
        <td>number of worker threads, suggested value: core*16</td>
      </tr>
    </tbody>
  </table>

  <p class="bs-callout bs-callout-warning">For security reasons RESTHeart by default binds only on <code class="language-plaintext highlighter-rouge">localhost</code>, so it won’t be reachable from external systems unless you edit the configuration. To accept connections from everywhere, you must set the listeners host to <code class="language-plaintext highlighter-rouge">0.0.0.0</code>.</p>

  <h3 id="security">Security</h3>

  <table class="table">
    <thead>
      <tr>
        <th>section</th>
        <th>default value</th>
        <th>description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Listeners</td>
        <td>https at <code class="language-plaintext highlighter-rouge">0.0.0.0:4443</code> and http at <code class="language-plaintext highlighter-rouge">0.0.0.0:8080</code> value</td>
        <td>Listeners allow to specify the protocol, ip, port and to use</td>
      </tr>
      <tr>
        <td>Proxied resources</td>
        <td><code class="language-plaintext highlighter-rouge">ajp://127.0.0.1:8009</code></td>
        <td>The URL of <code class="language-plaintext highlighter-rouge">restheart-platform-core</code> and of any other proxied resource</td>
      </tr>
      <tr>
        <td>SSL Configuration</td>
        <td>Use the <strong>insecure</strong> test self-signed certificate</td>
        <td>Allow configuring the certificate to be used by the https listener</td>
      </tr>
    </tbody>
  </table>

  <h2 id="parametric-configuration">Parametric configuration</h2>

  <p class="bs-callout bs-callout-info">Until version 4.0, only <code class="language-plaintext highlighter-rouge">restheart-platform-core.yml</code> can make use of parameters. This feature has also been extended to <code class="language-plaintext highlighter-rouge">restheart-platform-security.yml</code> starting from version 4.1.</p>

  <p>It is possible to pass an optional <a href="https://docs.oracle.com/javase/tutorial/essential/environment/properties.html">properties file</a> (following the Java Properties syntax) as a startup parameter, via a OS environment variable or via a Java property (which you can pass to the JVM with the “-D” command line parameter).</p>

  <p>This has proven to be very useful when RESTHeart is deployed in several environments and the configuration files are just slightly different among the environments. In the past was necessary to copy and paste any modification on all the YAML configuration files, but now you can have a single parametric YAML file, with a set of small, different properties files for each environment.</p>

  <p>For example, the <code class="language-plaintext highlighter-rouge">core.properties</code> file in <code class="language-plaintext highlighter-rouge">etc/</code> folder contains the following properties:</p>

  <div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">## RESTHeart Configuration - development properties.
# Documentation: https://restheart.org/docs/v4/configuration
</span>
<span class="py">https-listener</span> <span class="p">=</span> <span class="s">false</span>
<span class="py">https-host</span> <span class="p">=</span> <span class="s">localhost</span>
<span class="py">https-port</span> <span class="p">=</span> <span class="s">4443</span>

<span class="py">http-listener</span> <span class="p">=</span> <span class="s">true</span>
<span class="py">http-host</span> <span class="p">=</span> <span class="s">localhost</span>
<span class="py">http-port</span> <span class="p">=</span> <span class="s">8081</span>

<span class="py">ajp-listener</span> <span class="p">=</span> <span class="s">true</span>
<span class="py">ajp-host</span> <span class="p">=</span> <span class="s">localhost</span>
<span class="py">ajp-port</span> <span class="p">=</span> <span class="s">8009</span>

<span class="py">instance-name</span> <span class="p">=</span> <span class="s">default</span>
<span class="py">instance-base-url</span> <span class="p">=</span> <span class="s">http://localhost:8080</span>

<span class="py">default-representation-format</span> <span class="p">=</span> <span class="s">STANDARD</span>

<span class="py">mongo-uri</span> <span class="p">=</span> <span class="s">mongodb://127.0.0.1</span>

<span class="c"># The MongoDB resource to bind to the root URI /
# The format is /db[/coll[/docid]] or '*' to expose all dbs
</span><span class="py">root-mongo-resource</span> <span class="p">=</span> <span class="s">/restheart</span>

<span class="py">enable-log-console</span><span class="p">:</span> <span class="s">true</span>
<span class="py">log-level</span> <span class="p">=</span> <span class="s">INFO</span>
<span class="py">enable-log-file</span><span class="p">:</span> <span class="s">false</span>
<span class="c"># with --fork use an absoulte path of a writable file
</span><span class="py">log-file-path</span><span class="p">:</span> <span class="s">/var/log/restheart-platform-core.log</span>

<span class="py">query-time-limit</span> <span class="p">=</span> <span class="s">0</span>
<span class="py">aggregation-time-limit</span> <span class="p">=</span> <span class="s">0</span>

<span class="c">#suggested value: core*2
</span><span class="py">io-threads</span><span class="p">:</span> <span class="s">4</span>
<span class="c">#suggested value: core*16
</span><span class="py">worker-threads</span><span class="p">:</span> <span class="s">32</span>
</code></pre></div>  </div>

  <p>The <a href="https://gist.github.com/ujibang/d6256c8fcc3f67240e053b2bcc89c4d4">restheart-platform-core.yml</a> file contains the above parameters, expressed with the “Mustache syntax” (triple curly braces to indicate parametric values). Have a look at the below fragment for an example:</p>

  <div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="py">instance-name</span><span class="p">:</span> <span class="s">{{{instance-name}}}</span>

<span class="py">https-listener</span><span class="p">:</span> <span class="s">{{{https-listener}}}</span>
<span class="py">https-host</span><span class="p">:</span> <span class="s">{{{https-host}}}</span>
<span class="py">https-port</span><span class="p">:</span> <span class="s">{{{https-port}}}</span>

<span class="py">http-listener</span><span class="p">:</span> <span class="s">{{{http-listener}}}</span>
<span class="py">http-host</span><span class="p">:</span> <span class="s">{{{http-host}}}</span>
<span class="py">http-port</span><span class="p">:</span> <span class="s">{{{http-port}}}</span>

<span class="py">ajp-listener</span><span class="p">:</span> <span class="s">{{{ajp-listener}}}</span>
<span class="py">ajp-host</span><span class="p">:</span> <span class="s">{{{ajp-host}}}</span>
<span class="py">ajp-port</span><span class="p">:</span> <span class="s">{{{ajp-port}}}</span>

<span class="py">default-representation-format</span><span class="p">:</span> <span class="s">{{{default-representation-format}}}</span>

<span class="py">mongo-uri</span><span class="p">:</span> <span class="s">{{{mongo-uri}}}</span>

</code></pre></div>  </div>

  <p class="bs-callout bs-callout-info">Beware that you must stop and run RESTHeart again to reload a new configuration.</p>

  <p>Of course, you can decide which values in ``restheart-platform-core.yml` you want to become parametric or you can just use a static file.</p>

  <p>To start RESTHeart and provide it with a properties file pass the <code class="language-plaintext highlighter-rouge">--envfile</code> command line parameter:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>java <span class="nt">-jar</span> restheart-platform-core.jar etc/restheart-platform-core.yml <span class="nt">--envfile</span> etc/core.properties
</code></pre></div>  </div>

  <p>Alternatively, pass the envfile path via <code class="language-plaintext highlighter-rouge">RESTHEART_ENVFILE</code> environment variable:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">export </span><span class="nv">RESTHEART_ENVFILE</span><span class="o">=</span>etc/core.properties
<span class="nv">$ </span>java <span class="nt">-jar</span> restheart-platform-core.jar etc/restheart-platform-core.yml
</code></pre></div>  </div>

  <p>This approach allows to share one single configuration file among several environments. For example, one could create <code class="language-plaintext highlighter-rouge">core-dev.properties</code>, <code class="language-plaintext highlighter-rouge">core-test.properties</code> and <code class="language-plaintext highlighter-rouge">core-production.properties</code>, one for each environment, with one single common <code class="language-plaintext highlighter-rouge">restheart-platform-core.yml</code> configuration file.</p>

  <h3 id="environment-variables">Environment variables</h3>

  <p>Is is possible to override any <strong>primitive type parameter</strong> in <code class="language-plaintext highlighter-rouge">restheart-platform-core.yml</code> with an environment variable. Primitive types are:</p>

  <ul>
    <li>String</li>
    <li>Integer</li>
    <li>Long</li>
    <li>Boolean</li>
  </ul>

  <p>For example, the parameter <code class="language-plaintext highlighter-rouge">mongo-uri</code> in the YAML file can be overridden by exporting a <code class="language-plaintext highlighter-rouge">MONGO_URI</code> environment variable:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">export </span><span class="nv">MONGO_URI</span><span class="o">=</span><span class="s2">"mongodb://127.0.0.1"</span>
</code></pre></div>  </div>

  <p>The following log entry appears at the very beginning of logs during the startup process:</p>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[main] WARN  org.restheart.Configuration - &gt;&gt;&gt; Overriding parameter 'mongo-uri' with environment value 'MONGO_URI=mongodb://127.0.0.1'
</code></pre></div>  </div>

  <p>A shell environment variable is equivalent to a YAML parameter in <code class="language-plaintext highlighter-rouge">restheart-platform-core.yml</code>, but it’s all uppercase and <code class="language-plaintext highlighter-rouge">'-'</code> (dash) are replaced with <code class="language-plaintext highlighter-rouge">'_'</code> (underscore).</p>

  <p><strong>Remember</strong>: <em>environment variables replacement doesn’t work with YAML structured data in configuration files, like arrays or maps. You must use properties files and mustache syntax for that.</em></p>

  <h3 id="command-line-parameters">Command line parameters</h3>

  <p>To know the available CLI parameters, run RESTHeart with <code class="language-plaintext highlighter-rouge">--help</code>:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>java <span class="nt">-jar</span> target/restheart.jar <span class="nt">--help</span>
Usage: java <span class="nt">-Dfile</span>.encoding<span class="o">=</span>UTF-8 <span class="nt">-jar</span> <span class="nt">-server</span> restheart.jar <span class="o">[</span>options]
      &lt;Configuration file&gt;
  Options:
    <span class="nt">--envFile</span>, <span class="nt">--envfile</span>, <span class="nt">-e</span>
      Environment file name
    <span class="nt">--fork</span>
      Fork the process
      Default: <span class="nb">false</span>
    <span class="nt">--help</span>, -?
      This <span class="nb">help </span>message
</code></pre></div>  </div>

</div>

    </div>
</div>
    </div>

    <footer class="bs-docs-footer mt-0">
  <!-- <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + '://platform.twitter.com/widgets.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'twitter-wjs');</script> -->
  <div id="fb-root"></div>
  <section id="mainFooter">
    <div class="container-fluid">
      <div>
        <div class="bs-docs-social">
          <ul class="socialNetwork">
            <li class="ml-auto">
              <a href="https://twitter.com/softinstigate" class="tips" title="Follow us on Twitter" data-original-title="follow us on Twitter"
                target="_blank">
                <svg class="socialNetwork__icon"><use xlink:href="/images/sprite.svg#twitter" /></svg>
              </a>
            </li>
            <li>
              <a href="https://github.com/softinstigate/restheart" class="tips" title="Get the source code" data-original-title="get the source code"
                target="_blank">
                <svg class="socialNetwork__icon"><use xlink:href="/images/sprite.svg#github" /></svg>
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div>
        Made with
        <!--<span class="glyphicon glyphicon-heart"></span>-->
        <svg class="footer__like"><use xlink:href="/images/sprite.svg#like" /></svg>
        by
        <a href="https://www.softinstigate.com" target="_blank">SoftInstigate</a>
      </div>
      <div>
        <a href="https://softinstigate.com/en/privacy" class="mr-2 small">Privacy Policy</a>
        <a href="https://www.iubenda.com/privacy-policy/15571002/cookie-policy" class="small iubenda-nostyle no-brand iubenda-embed " title="Cookie Policy">Cookie Policy</a>
      </div>
    </section>
</footer>

    <!-- End Document ================================================== -->
</body>

</html>
<!-- add copy button on code snippet -->
<script src="/assets/js/clipboard.min.js"></script>
<style>
    .listingblock:hover .clipboard {
        display: block;
    }

    .clipboard {
        display: none;
        border: 0;
        font-size: .75em;
        text-transform: uppercase;
        font-weight: 800;
        padding: 2px;
        color: #999;
        position: absolute;
        top: 6px;
        right: 10px;
        background: transparent;
    }

    code + .clipboard {
        padding: 0;
    }

    .clipboard:hover, .clipboard:focus, .clipboard:active {
        outline: 0;
        color: white;
        /* background-color: #eee9e6; */
    }
</style>
<!-- add copy button on code snippet -->
<script>
    window.onload = function() {
        function target(b) {
            var p = b.parentNode;
            if (p.className.includes("highlight")) {
                var elems = p.getElementsByTagName("code");
                if (elems.length > 0) {
                    return elems[0];
                }
            }
            return p.childNodes[0];
        }

        var pre = document.getElementsByTagName('pre');
        for (var i = 0; i < pre.length; i++) {
            var b = document.createElement('button');
            b.className = 'clipboard';
            b.textContent = 'Copy';
            // b.innerHTML = '<i style="font-size:18px" class="icon-clipboard"></i>';
            if (pre[i].childNodes.length === 1 && pre[i].childNodes[0].nodeType === 3) {
                var div = document.createElement('div');
                div.textContent = pre[i].textContent;
                pre[i].textContent = '';
                pre[i].appendChild(div);
            }
            pre[i].appendChild(b);
        }

        var clipboard = new ClipboardJS('.clipboard', {
            // this custom text function, remove any line that doesn't start with $
            text: function (trigger) {
                var t = target(trigger);
                const text = target(trigger).outerText;

                if (text) {
                    const dataLang = t.getAttribute('data-lang');
                    if (dataLang === 'bash') {
                        return text
                            .replace(/^(?!\$.*$).*/gm, '') // remove lines that don't start with $
                            .replace(/^\$ */gm, '') // remove leading $
                            .replace(/^\s*[\r\n]/gm, '') // remove blank lines
                            .replace(/^\s+|\s+$/gm, ''); // trim string
                    }
                }
            },
            target: target
        });
        clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.textContent = 'Copied';
            setTimeout(function() {
                e.trigger.textContent = 'Copy';
            }, 2000);
        });
        clipboard.on('error', function(e) {
            console.error('Action:', e.action, e);
            console.error('Trigger:', e.trigger);
        });
    };
</script>