<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->

<html lang="en">
<!--<![endif]-->
<head>
   <meta charset="utf-8">
   <title>RESTHeart - Upgrade to RESTHeart v4</title>
   <meta name="description" content="Low code API Framework for MongoDB">
   <meta name="author" content="SoftInstigate srl">
   <meta name="keywords" content="restheart,mongodb,rest,,graphql,api,http,microservice,java,framework">
   <!-- Open Graph -->
   <meta property="og:type" content="website">
   <meta property="og:url" content="https://restheart.org">
   <meta property="og:logo" content="/images/restheart logo.svg">
   <meta property="og:title" content="RESTHeart - Upgrade to RESTHeart v4">
   <meta property="og:description" content="Low code API Framework for MongoDB">
   <meta property="og:locale" content="en">
   
   <!-- avoid search engine indexing of old documentation pages  -->
   <meta name="robots" content="noindex,nofollow">
   
   <!-- Mobile Specific Metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <!-- icon fonts -->
   <script src="/js/fontawesome.com_c39cf060d4.js"></script>
   <link type="text/css" rel="stylesheet" href="/font-icons/custom-icons/css/custom-icons.css">
   <link type="text/css" rel="stylesheet" href="/font-icons/custom-icons/css/custom-icons-ie7.css">
   <!-- Custom css -->
   <link rel="stylesheet" type="text/css" href="/css/main.css">
   <!-- js ================================================== -->
   <script src="https://code.jquery.com/jquery.min.js"></script>
   <script src="/assets/js/bootstrap.bundle.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
   <script src="https://unpkg.com/@stackblitz/sdk/bundles/sdk.umd.js"></script>
   <script src="/js/carousel.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick.min.js"></script>
   <!-- Github buttons. -->
   <script async defer src="https://buttons.github.io/buttons.js"></script>
   <!--iframeResizer-->
  <script src="/assets/js/iframe-resizer.parent.js"></script>
   <!-- Favicons ================================================== -->
  <link rel="icon" type="image/svg+xml" href="/images/restheart logo.svg" />
  <link rel="shortcut icon" href="/images/favicon/favicon.png" />
  <link rel="canonical" href="https://restheart.org/docs/v4/upgrade-to-v4">
  <link rel="alternate" type="application/atom+xml" title="RESTHeart - API Framework" href="https://restheart.org/feed.xml" />
  <script defer data-domain="restheart.org" src="https://plausible.io/js/script.js"></script>
</head>


<body>
    <header id="mainHeader" class="fixed-top background-primary" role="banner">
    <div class="container-fluid">
        <nav class="navbar navbar-default scrollMenu navbar-expand-lg" role="navigation">
            <a class="navbar-brand" href="/">
                <h2 class="text-white"><strong>REST</strong>Heart</h2>
            </a>
            <!-- Place this tag where you want the button to render. -->
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target=".navbar-ex1-collapse"><span
                    class="sr-only">Toggle navigation</span> &#x2630;</button>
            <div class="collapse navbar-collapse navbar-ex1-collapse background-primary" id="scrollTarget">
                <ul class="nav navbar-nav ml-md-auto">
                    <!-- only bounce slack button on home page-->
                    
                    

                    <li class="nav-item ml-1 ml-lg-2 ml-xl-4 mb-0 pb-0 ">
                        <a class="github-button" href="https://github.com/SoftInstigate/restheart" data-size="large" data-show-count="true" aria-label="Star SoftInstigate/restheart on GitHub"></a>
                    </li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/sophia">Ask Sophia</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs">Docs</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/faq">FAQ</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/docs/setup-with-docker/">GET</a></li>
                    <li class="nav-item"><a class="ml-1 ml-lg-2 ml-xl-4" href="/contact">Contacts</a></li>
                </ul>
            </div>
        </nav>
    </div>
</header>

<div class="alert alert-warning m-0 text-center" role="alert">
    <strong>RESTHeart 8 is the current stable release. Switch documentation to <a href="/docs">v8</a></strong>
</div>



<a  target="_blank" class="gitter-open-chat-button fixed-bottom-right" href="https://join.slack.com/t/restheart/shared_invite/zt-1olrhtoq8-5DdYLBWYDonFGEALhmgSXQ"></a>


    <div class="page-content">
        <div class="container-fluid imgHover doc">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
            <div class="bd-sidebar__head">
                <div class="dropdown d-flex justify-content-center w-100">
                    <button class="btn btn-secondary dropdown-toggle w-100 p-1 mb-2" type="button"
                        id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        v4
                    </button>
                    <div class="dropdown-menu mt-2 mr-1 pb-2" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="/docs">
                            
                            v8
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v7">
                            
                            v7
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v6">
                            
                            v6
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v5">
                            
                            v5
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v4">
                            
                            <strong>v4</strong>
                            
                        </a>
                        <a class="dropdown-item" href="/docs/v3">
                            
                            v3
                            
                        </a>
                    </div>
                </div>
                <form action="https://www.google.com/search" class="form bd-sidebar__search d-flex" method="get"
                    name="searchform" target="_blank">
                    <input name="sitesearch" type="hidden" value="restheart.org/docs">
                    <input autocomplete="on" class="form-control input-sm search bd-sidebar__input" name="q"
                        placeholder="Search" required="required" type="text">
                    <button class="bd-sidebar__submit" type="submit">
                        <svg width="16" height="16">
                            <use xlink:href="/images/sprite.svg#search" /></svg>
                    </button>
                </form>
                <div class="d-flex flex-wrap justify-content-between align-items-center">
                    <a href="https://github.com/SoftInstigate/restheart-website/edit/master/docs/v4/upgrade-to-v4.md"
                        class="small mt-2 mb-1 ml-lg-auto"><i class="icon-pencil"></i>Edit Page</a>
                    <button class="btn btn-link bd-sidebar__toggle navbar-expand-md p-0 mb-1 d-md-none" type="button"
                        data-toggle="collapse" data-target="#bd-sidebar__menu" aria-controls="bd-sidebar__menu"
                        aria-expanded="false" aria-label="Toggle docs navigation">
                        Table of Contents
                        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 30 30" width="30" height="30"
                            focusable="false">
                            <title>Menu</title>
                            <path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10"
                                d="M4 7h22M4 15h22M4 23h22" />
                        </svg>
                    </button>
                </div>
            </div>

            <div class="bd-sidebar__menu collapse d-md-block" id="bd-sidebar__menu">
                
                    <h2 id="getting-started"><a href="/docs">Intoduction</a></h2>

<h2 id="getting-started">Getting Started</h2>
<ul>
    <li><a href="/docs/v4/setup">Setup</a></li>
    <li><a href="/docs/v4/configuration">Configuration</a></li>
    <li><a href="/docs/v4/tutorial">Absolute Beginner Tutorial</a></li>
    <li><a href="/docs/v4/quick-reference">Quick Reference</a></li>
    <li><a href="/docs/v4/resource-uri">Resource URIs</a></li>
    <li><a href="/docs/v4/representation-format">Representation Format</a></li>
    <li><a href="/docs/v4/blog-posts">Tutorials</a></li>
    <li><a href="/docs/v4/performances">Performances</a></li>
    <li><a href="/docs/v4/clustering">Clustering & Load Balancing</a></li>
</ul>

<h2 id="upgrading-from-3"><a href="/docs/v4/upgrade-to-v4">Upgrade to v4</a></h2>
<h2 id="upgrading-from-3"><a href="/docs/v4/roadmap">Roadmap</a></h2>

<h2 id="content-api">Content API</h2>
<ul>
    <li><a href="/docs/v4/read-docs">Read JSON Documents</a></li>
    <li><a href="/docs/v4/write-docs">Write JSON Documents</a></li>
    <li><a href="/docs/v4/files">Binary Files with GridFS</a></li>
    <li><a href="/docs/v4/aggregations">Aggregations</a></li>
    <li><a href="/docs/v4/csv">Upload CSV files</a></li>
    <li><a href="/docs/v4/json-schema-validation">JSON Schema Validation</a></li>
    <li><a href="/docs/v4/change-streams">Change Streams</a></li>
    <li><a href="/docs/v4/transactions">Transactions</a></li>
</ul>

<h2 id="mgmt-api">Management API</h2>
<ul>
    <li><a href="/docs/v4/mgmt/dbs-collections">Databases and Collections</a></li>
    <li><a href="/docs/v4/mgmt/indexes">Indexes</a></li>
    <li><a href="/docs/v4/mgmt/relationships">Relationships</a></li>
</ul>

<h2 id="security">Securing Requests</h2>
<ul>
    <li><a href="/docs/v4/security/overview">Overview</a></li>
    <li><a href="/docs/v4/security/authentication">Authentication</a></li>
    <li><a href="/docs/v4/security/authorization">Authorization</a></li>
    <li><a href="/docs/v4/security/user-management">User Management</a></li>
    <li><a href="/docs/v4/security/tls">Configure TLS</a></li>
    <li><a href="/docs/v4/security/secure-connection-to-mongodb">Secure connection to MongoDB</a></li>
    <li><a href="/docs/v4/security/how-clients-authenticate">How Clients Authenticate</a></li>
</ul>


<h2 id="plugins">Plugins</h2>
<ul>
    <li><a href="/docs/v4/plugins/overview">Overview</a></li>
    <li><a href="/docs/v4/plugins/apply">Apply plugins</a></li>
    <li><a href="/docs/v4/plugins/list">Available plugins</a></li>
</ul>

<h2 id="develop-core-plugins">Develop Plugins</h2>
<ul>
    <li><a href="/docs/v4/develop/core-plugins">Core Plugins</a></li>
    <li><a href="/docs/v4/develop/security-plugins">Security Plugins</a></li>
    <li><a href="/docs/v4/develop/packaging">Packaging Plugins</a></li>
    <li><a href="/docs/v4/develop/best-practices">Best practices</a></li>
</ul>

<h2 id="other-fatures">Other Features</h2>
<ul class="mb-5">
    <li><a href="/docs/v4/etag">ETag</a></li>
    <li><a href="/docs/v4/cors-support">CORS Support</a></li>
    <li><a href="/docs/v4/shard-keys">Shard Keys</a></li>
    <li><a href="/docs/v4/speedup-requests-with-cursor-pools">Cursor Pools</a></li>
    <li><a href="/docs/v4/monitoring">Monitoring</a></li>
    <li><a href="/docs/v4/auditing">Auditing</a></li>
</ul>

                
            </div>
        </div>
        <div class="d-none d-xl-block col-xl-2 order-last bd-toc">

  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#architecture">Architecture</a></li>
    <li><a href="#new-features">New features</a></li>
    <li><a href="#default-configuration">Default configuration</a>
      <ul>
        <li><a href="#core">core</a></li>
        <li><a href="#security">security</a></li>
      </ul>
    </li>
    <li><a href="#representation-format">Representation Format</a>
      <ul>
        <li><a href="#restheart-v3">RESTHeart v3</a></li>
        <li><a href="#restheart-platform-v4">RESTHeart Platform v4</a></li>
      </ul>
    </li>
    <li><a href="#plugins-development">Plugins Development</a>
      <ul>
        <li><a href="#core-plugins">Core Plugins</a></li>
        <li><a href="#security-plugins">Security Plugins</a></li>
      </ul>
    </li>
    <li><a href="#hal-browser-removed">HAL browser removed</a></li>
  </ul>

</div>
<div class="col-12 col-md-9 col-xl-8 py-md-3 bd-content">

  <div class="docs-head d-flex align-items-center justify-content-between">
    <h2 class="d-flex align-items-center m-0 pr-3">
        <span>Upgrade to RESTHeart v4</span>
    </h2>
</div>

  <h2 id="introduction">Introduction</h2>

  <p>This page highlights the main differences between RESTHeart Platform v4 and RESTHeart v3 and provides guidelines for upgrading.</p>

  <p>The RESTHeart team has worked hard to improve RESTHeart while keeping upgrading as simple as possible. The upgrade process has been tested successfully in complex installations.</p>

  <p class="bs-callout bs-callout-success">The RESTHeart team supports you. Check our <a href="/services">Services</a> for free and professional support options.</p>

  <h2 id="architecture">Architecture</h2>

  <div class="alert alert-info" role="alert">
    <h2 class="alert-heading">Micro-services architecture.</h2>
    <hr class="my-2" />
    <p>RESTHeart Platform v4 has a new modular architecture:  it has been split in two micro-services versus the monolithic architecture of v3.</p>
</div>

  <div class="row">
    <div class="col-lg-9 col-12 align-self-center">
        <p>
        <strong>The new architecture explained</strong>
       </p>
        <p>
        RESTHeart v3 has been growing over the last 5 years featuring a <strong>REST API for MongoDB</strong> and a strong <strong>security layer</strong>. The code got complex to update and maintain, so that RESTHeart Platform v4 is now split in modules clued together in a micro-service architecture.
        </p>
        <p>
        This resulted in two projects that <cite>do one thing and do it well</cite>. Each of them can also be reused alone in different architectures.
        </p>
        <p>
            The two micro-services are:
        </p>
        <ul>
            <li><strong>restheart-core</strong> handles the REST API;</li>
            <li><strong>restheart-security</strong> is responsible of enforcing the security policy acting as a reverse proxy for restheart-core.</li>
        </ul>
        <div class="alert alert-success">
            It is very easy to start the two micro-services. Either using docker-compose or just starting them with java from the command line. In the latter case it is as easy as starting the two processes without specifying any configuration file. The default configuration seamlessly connects the two and just makes them work.
        </div>
    </div>
    <div class="d-none d-lg-block col-lg-3 text-center align-self-center">
        <img class="w-75" src="/images/restheart-architecture.svg" />
    </div>
</div>

  <h2 id="new-features">New features</h2>

  <p>RESTHeart Platform v4 introduces two main new features:</p>

  <ul>
    <li><a href="/docs/v4/change-streams">Change Streams</a> to handle real-time data streams via WebSocket connections.</li>
    <li><a href="/docs/v4/transactions">Transactions</a> to handle multi-document transactions.</li>
  </ul>

  <h2 id="default-configuration">Default configuration</h2>

  <p class="alert alert-warning">RESTHeart Platform 4 has some different default values.</p>

  <p class="alert alert-info">The default configuration applies starting restheart-platform-core either without specifying a configuration file or specifying the parametric configuration file <code class="language-plaintext highlighter-rouge">restheart.yml</code> with the properties file <code class="language-plaintext highlighter-rouge">default.properties</code></p>

  <p class="alert alert-info">You can start RESTHeart Platform v4 with v3 backward compatible settings using the properties file <code class="language-plaintext highlighter-rouge">bwcv3.properties</code></p>

  <p>The following tables summarize the different default configuration values.</p>

  <h3 id="core">core</h3>

  <table class="table">
    <thead>
      <tr>
        <th> </th>
        <th>restheart v3</th>
        <th>restheart-platform-core v4</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>listeners</td>
        <td>ajp, http, https</td>
        <td>ajp</td>
      </tr>
      <tr>
        <td>mongo-mount</td>
        <td>all dbs</td>
        <td>only the db <code class="language-plaintext highlighter-rouge">restheart</code></td>
      </tr>
      <tr>
        <td>representation-format</td>
        <td>SHAL (aka PLAIN_JSON)</td>
        <td>STANDARD</td>
      </tr>
      <tr>
        <td>cacheInvalidator URI</td>
        <td><code class="language-plaintext highlighter-rouge">/_logic/ci</code></td>
        <td><code class="language-plaintext highlighter-rouge">/ci</code></td>
      </tr>
      <tr>
        <td>csvLoader URI</td>
        <td><code class="language-plaintext highlighter-rouge">/_logic/csv</code></td>
        <td><code class="language-plaintext highlighter-rouge">/csv</code></td>
      </tr>
    </tbody>
  </table>

  <h3 id="security">security</h3>

  <table class="table">
    <thead>
      <tr>
        <th> </th>
        <th>restheart v3</th>
        <th>restheart-platform-security v4</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>requestPredicatesAuthorizer configuration file</td>
        <td><code class="language-plaintext highlighter-rouge">etc/users.yml</code></td>
        <td><code class="language-plaintext highlighter-rouge">etc/acl.yml</code></td>
      </tr>
      <tr>
        <td>rndTokenService URI</td>
        <td><code class="language-plaintext highlighter-rouge">/_logic/tokens/&lt;tknid&gt;</code></td>
        <td><code class="language-plaintext highlighter-rouge">/tokens/&lt;tknid&gt;</code></td>
      </tr>
      <tr>
        <td>pingService URI</td>
        <td><code class="language-plaintext highlighter-rouge">/_logic/ping</code></td>
        <td><code class="language-plaintext highlighter-rouge">/ping</code></td>
      </tr>
      <tr>
        <td>getRoles service URI</td>
        <td><code class="language-plaintext highlighter-rouge">/_logic/roles</code></td>
        <td><code class="language-plaintext highlighter-rouge">/roles</code></td>
      </tr>
    </tbody>
  </table>

  <h2 id="representation-format">Representation Format</h2>

  <p>Following several community feedbacks, RESTHeart Platform v4 introduces a new default representation format that is more compact, easy to use and effective.</p>

  <p class="alert alert-info">Read more at <a href="/docs/v4/representation-format">Representation Format</a></p>

  <p>Examples follows:</p>

  <h3 id="restheart-v3">RESTHeart v3</h3>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># read metadata and documents of collection restheart.coll -&gt; GET /restheart/coll

{ "_embedded": [
    { &lt;doc_1&gt; },
    { &lt;doc_2&gt; },
    ...,
    { &lt;doc_n&gt; }
],
    "aggrs": [...]
    "checkers": [...],
    "transformers": [...],
    "streams": [...]
}

# count documents of collection restheart.coll -&gt; GET /restheart/coll/?count&amp;np

{ "_embedded": [], "_size": n }
</code></pre></div>  </div>

  <h3 id="restheart-platform-v4">RESTHeart Platform v4</h3>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># read documents of collection restheart.coll -&gt; GET /coll

[
    { &lt;doc_1&gt; },
    { &lt;doc_2&gt; },
    ...,
    { &lt;doc_n&gt; }
]

# read metadata of collection restheart.coll -&gt; GET /coll/_meta

{
    "aggrs": [...]
    "checkers": [...],
    "transformers": [...],
    "streams": [...]
}

# count documents of collection restheart.coll -&gt; GET /coll/_size

{ "_size": n }
</code></pre></div>  </div>

  <h2 id="plugins-development">Plugins Development</h2>

  <p class="alert alert-success">The new Java API to extend RESTHeart has been improved in such a way that it is straightforward to adapt legacy implementations.</p>

  <h3 id="core-plugins">Core Plugins</h3>

  <p><em>Transformers</em>, <em>Hooks</em>, <em>Checkers</em> and <em>Services</em> (aka <em>Logic Handlers</em>) are implemented extending interfaces that are identical to the legacy ones, with the exceptions that they were moved to the more meaningful package <code class="language-plaintext highlighter-rouge">org.restheart.plugins</code>.</p>

  <p>The configuration of custom plugins has been simplified. Rather that declaring the implementation classes in the configuration file, plugins are registered using the <code class="language-plaintext highlighter-rouge">@RegisterPlugin</code> annotation. Plugins can optionally have a options set in the configuration file. An example follows.</p>

  <p><strong>Ping service implementation</strong></p>

  <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RegisterPlugin</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"pingService"</span><span class="o">,</span>
        <span class="n">description</span> <span class="o">=</span> <span class="s">"Ping service"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PingService</span> <span class="kd">extends</span> <span class="nc">Service</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">msg</span><span class="o">;</span>

    <span class="cm">/**
     *
     * @param confArgs arguments optionally specified in the configuration file
     */</span>
    <span class="kd">public</span> <span class="nf">PingService</span><span class="o">(</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">confArgs</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">confArgs</span><span class="o">);</span>

        <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span>  <span class="n">confArgs</span> <span class="o">!=</span> <span class="kc">null</span>  <span class="o">&amp;&amp;</span> <span class="n">confArgs</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">"msg"</span><span class="o">)</span>
                <span class="o">?</span> <span class="o">(</span><span class="nc">String</span><span class="o">)</span> <span class="n">confArgs</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"msg"</span><span class="o">)</span>
                <span class="o">:</span> <span class="s">"ping"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">defaultUri</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"/ping"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**
     *
     * @param exchange
     * @param context
     * @throws Exception
     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleRequest</span><span class="o">(</span><span class="nc">HttpServerExchange</span> <span class="n">exchange</span><span class="o">,</span> <span class="nc">RequestContext</span> <span class="n">context</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">isOptions</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">handleOptions</span><span class="o">(</span><span class="n">exchange</span><span class="o">,</span> <span class="n">context</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">isGet</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">context</span><span class="o">.</span><span class="na">setResponseContent</span><span class="o">(</span><span class="k">new</span> <span class="nc">BsonDocument</span><span class="o">(</span><span class="s">"msg"</span><span class="o">,</span>
                    <span class="k">new</span> <span class="nf">BsonString</span><span class="o">(</span><span class="n">msg</span><span class="o">)));</span>
            <span class="n">context</span><span class="o">.</span><span class="na">setResponseStatusCode</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">SC_OK</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">context</span><span class="o">.</span><span class="na">setResponseStatusCode</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">SC_NOT_IMPLEMENTED</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">next</span><span class="o">(</span><span class="n">exchange</span><span class="o">,</span> <span class="n">context</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>  </div>

  <p><strong>Ping service optional configuration</strong></p>

  <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">pingService</span><span class="pi">:</span>
    <span class="c1">#uri: "/hello"</span>
    <span class="na">msg</span><span class="pi">:</span> <span class="s">Hello World!</span>
</code></pre></div>  </div>

  <h3 id="security-plugins">Security Plugins</h3>

  <p>Security can be extended much easier compared to v3 and more types of security plugins are available: <em>Authentication Mechanisms</em>, <em>Authenticators</em>, <em>Authorizers</em>, <em>Token Managers</em>, <em>Services</em>, <em>Initializers</em> and <em>Interceptors</em>.</p>

  <blockquote class="jumbotron">
    <p>it is so easy implementing the security layer with restheart-security and it is so complete that we expect it to be used by other projects
<em>Andrea Di Cesare</em></p>
  </blockquote>

  <p class="alert alert-info">The main reason behind the RESTHeart Platform being split in two micro-services versus the monolithic architecture of RESTHeart 3 was simplifying and hardening the implementation of the security layer.</p>

  <p>Refer to <a href="/docs/v4/develop/security-plugins/">Develop Security Plugins</a> for more information.</p>

  <h2 id="hal-browser-removed">HAL browser removed</h2>

  <p>The HAL browser has been removed, since the project is no longer maintained.</p>

  <p class="bs-callout bs-callout-info">RESTHeart Platform v5 will include an Admin Web application that will replace it.</p>

  <p>An online alternative that we suggest is <a href="http://restninja.io" target="_blank">http://restninja.io</a></p>
</div>

    </div>
</div>
    </div>

    <footer class="bs-docs-footer mt-0">
  <!-- <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + '://platform.twitter.com/widgets.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'twitter-wjs');</script> -->
  <div id="fb-root"></div>
  <section id="mainFooter">
    <div class="container-fluid">
      <div>
        <div class="bs-docs-social">
          <ul class="socialNetwork">
            <li class="ml-auto">
              <a href="https://twitter.com/softinstigate" class="tips" title="Follow us on Twitter" data-original-title="follow us on Twitter"
                target="_blank">
                <svg class="socialNetwork__icon"><use xlink:href="/images/sprite.svg#twitter" /></svg>
              </a>
            </li>
            <li>
              <a href="https://github.com/softinstigate/restheart" class="tips" title="Get the source code" data-original-title="get the source code"
                target="_blank">
                <svg class="socialNetwork__icon"><use xlink:href="/images/sprite.svg#github" /></svg>
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div>
        Made with
        <!--<span class="glyphicon glyphicon-heart"></span>-->
        <svg class="footer__like"><use xlink:href="/images/sprite.svg#like" /></svg>
        by
        <a href="https://www.softinstigate.com" target="_blank">SoftInstigate</a>
      </div>
      <div>
        <a href="https://softinstigate.com/en/privacy" class="mr-2 small">Privacy Policy</a>
        <a href="https://www.iubenda.com/privacy-policy/15571002/cookie-policy" class="small iubenda-nostyle no-brand iubenda-embed " title="Cookie Policy">Cookie Policy</a>
      </div>
    </section>
</footer>

    <!-- End Document ================================================== -->
</body>

</html>
<!-- add copy button on code snippet -->
<script src="/assets/js/clipboard.min.js"></script>
<style>
    .listingblock:hover .clipboard {
        display: block;
    }

    .clipboard {
        display: none;
        border: 0;
        font-size: .75em;
        text-transform: uppercase;
        font-weight: 800;
        padding: 2px;
        color: #999;
        position: absolute;
        top: 6px;
        right: 10px;
        background: transparent;
    }

    code + .clipboard {
        padding: 0;
    }

    .clipboard:hover, .clipboard:focus, .clipboard:active {
        outline: 0;
        color: white;
        /* background-color: #eee9e6; */
    }
</style>
<!-- add copy button on code snippet -->
<script>
    window.onload = function() {
        function target(b) {
            var p = b.parentNode;
            if (p.className.includes("highlight")) {
                var elems = p.getElementsByTagName("code");
                if (elems.length > 0) {
                    return elems[0];
                }
            }
            return p.childNodes[0];
        }

        var pre = document.getElementsByTagName('pre');
        for (var i = 0; i < pre.length; i++) {
            var b = document.createElement('button');
            b.className = 'clipboard';
            b.textContent = 'Copy';
            // b.innerHTML = '<i style="font-size:18px" class="icon-clipboard"></i>';
            if (pre[i].childNodes.length === 1 && pre[i].childNodes[0].nodeType === 3) {
                var div = document.createElement('div');
                div.textContent = pre[i].textContent;
                pre[i].textContent = '';
                pre[i].appendChild(div);
            }
            pre[i].appendChild(b);
        }

        var clipboard = new ClipboardJS('.clipboard', {
            // this custom text function, remove any line that doesn't start with $
            text: function (trigger) {
                var t = target(trigger);
                const text = target(trigger).outerText;

                if (text) {
                    const dataLang = t.getAttribute('data-lang');
                    if (dataLang === 'bash') {
                        return text
                            .replace(/^(?!\$.*$).*/gm, '') // remove lines that don't start with $
                            .replace(/^\$ */gm, '') // remove leading $
                            .replace(/^\s*[\r\n]/gm, '') // remove blank lines
                            .replace(/^\s+|\s+$/gm, ''); // trim string
                    }
                }
            },
            target: target
        });
        clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.textContent = 'Copied';
            setTimeout(function() {
                e.trigger.textContent = 'Copy';
            }, 2000);
        });
        clipboard.on('error', function(e) {
            console.error('Action:', e.action, e);
            console.error('Trigger:', e.trigger);
        });
    };
</script>