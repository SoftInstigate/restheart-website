<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interactive Docs Test</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <style>
      .code-block {
        background-color: #f5f5f5;
        padding: 15px;
        border-radius: 4px;
        margin: 10px 0;
        font-family: monospace;
        white-space: pre;
      }
      .config-panel {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        padding: 20px;
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container mt-4">
      <h1>Interactive Docs Test</h1>

      <div
        class="config-panel"
        x-data="interactiveDocs"
        x-init="storeOriginalCodeBlocks()"
        x-show="isInitialized"
      >
        <h3 class="mb-3">ðŸ”§ Configuration</h3>
        <div class="row g-3 mb-3">
          <div class="col-md-3">
            <label class="form-label fw-bold">Client Type</label>
            <select
              x-model="clientType"
              @change="onClientTypeChange()"
              class="form-select"
            >
              <option value="all">Show All</option>
              <option value="curl">cURL</option>
              <option value="httpie">HTTPie</option>
              <option value="javascript">JavaScript</option>
            </select>
          </div>
          <div class="col-md-3">
            <label class="form-label fw-bold">Instance URL</label>
            <input
              type="text"
              x-model="instanceUrl"
              @input="onInputChange()"
              class="form-control"
              placeholder="https://your-instance.restheart.com"
            />
          </div>
          <div class="col-md-3">
            <label class="form-label fw-bold">JWT</label>
            <input
              type="text"
              x-model="jwt"
              @input="onInputChange()"
              class="form-control"
              placeholder="JWT"
            />
          </div>
          <div class="col-md-3">
            <label class="form-label fw-bold">Password</label>
            <input
              type="password"
              x-model="password"
              @input="onInputChange()"
              class="form-control"
              placeholder="password"
            />
          </div>
        </div>
        <div class="mt-3">
          <button @click="clearValues()" class="btn btn-danger">
            Clear Values
          </button>
          <button @click="updateExamples()" class="btn btn-primary ms-2">
            Update Examples
          </button>
        </div>
      </div>

      <h3 class="code-section" data-client-type="curl">cURL Example</h3>
      <pre class="code-block code-section" data-client-type="curl"><code>
curl -X PUT [INSTANCE-URL]/users/root \
  -H "Authorization: Bearer [JWT]"
  -d '{"password": "[YOUR-PASSWORD]"}'
        </code></pre>

      <h3 class="code-section" data-client-type="httpie">HTTPie Example</h3>
      <pre class="code-block code-section" data-client-type="httpie"><code>
http PUT [INSTANCE-URL]/users/root \
  Authorization:"Bearer [JWT]" password=[YOUR-PASSWORD]
        </code></pre>

      <h3 class="code-section" data-client-type="javascript">
        JavaScript Example
      </h3>
      <pre class="code-block code-section" data-client-type="javascript"><code>
const response = await fetch('[INSTANCE-URL]/users/root', {
  method: 'PUT',
  body: JSON.stringify({ "password": "[YOUR-PASSWORD]" }),
  headers: {
    'Authorization': 'Bearer [JWT]'
  }
});
        </code></pre>

      <div class="mt-5">
        <h4>Debug Info</h4>
        <p>Current client type: <span x-text="clientType"></span></p>
        <p x-show="isShowingFiltered" class="client-status alert alert-info">
          ðŸ“± Showing only <strong x-text="filteredClientName"></strong> examples
        </p>
        <p>
          Stored code blocks:
          <span x-text="Object.keys(originalCodeBlocks).length"></span>
        </p>
        <p>
          Current instanceUrl: <span x-text="instanceUrl || '[empty]'"></span>
        </p>
        <p>Current JWT: <span x-text="jwt || '[empty]'"></span></p>
        <p>
          Current password:
          <span x-text="password ? '******' : '[empty]'"></span>
        </p>
      </div>
    </div>

    <script src="interactive-docs-config.js"></script>
  </body>
</html>
